"use strict";(self.webpackChunkmuse_dashboard=self.webpackChunkmuse_dashboard||[]).push([[725],{1725:(e,t,r)=>{r.r(t),r.d(t,{default:()=>V});var a=r(9950),l=r(6025),n=r(5355),s=r(2460),i=r(8902),o=r(3561),d=r(9654),c=r(2077),h=r(6004),m=r(6092),u=r(2056),x=r(5398),j=r(5621),p=r(1203),g=r(7465),f=r(2241),A=r(9378),y=r(1419),k=r(7065),v=r(8750),Y=r(9246),b=r(9051),D=r.n(b),M=r(5480),_=r(3658),C=r(495),S=r(4893),w=r(3911),E=r(9251),H=r(5989),T=r(9843),N=r(1397),z=r.n(N),B=r(4414);const{Title:I,Text:O,Paragraph:K}=M.A,{Option:R}=l.A,$=e=>{let{events:t,meetings:r,leaves:n}=e;const[s,i]=(0,a.useState)(D()()),[o,m]=(0,a.useState)("day"),[f,k]=(0,a.useState)("agenda"),[v,Y]=(0,a.useState)([]),[b,M]=(0,a.useState)(null),[N,$]=(0,a.useState)(!1),[P,G]=(0,a.useState)(!1),[L,F]=(0,a.useState)(!0),[V,W]=(0,a.useState)({types:["event","meeting","leave"],timeRange:"all"}),[U,q]=(0,a.useState)("light"),J={light:{background:"#f0f2f5",cardBackground:"#ffffff",textColor:"#000000"},dark:{background:"#141414",cardBackground:"#1f1f1f",textColor:"#ffffff"},colorful:{background:"#e6f7ff",cardBackground:"#ffffff",textColor:"#000000"}},Z=Array.from({length:24},((e,t)=>D()().startOf("day").add(t,"hours"))),Q=(0,a.useCallback)(((e,t)=>{e.dataTransfer.setData("text/plain",JSON.stringify(t))}),[]),X=(0,a.useCallback)((e=>{e.preventDefault();e.currentTarget.style.backgroundColor="#f0f0f0"}),[]),ee=(0,a.useCallback)((e=>{e.preventDefault();e.currentTarget.style.backgroundColor=""}),[]),te=(0,a.useCallback)(((e,t)=>{e.preventDefault();e.currentTarget.style.backgroundColor="";try{const r=JSON.parse(e.dataTransfer.getData("text/plain")),a=D()(t).hour(D()(r.start).hour()).minute(D()(r.start).minute()),l=D().duration(D()(r.end).diff(D()(r.start))),n=D()(a).add(l);console.log("Event moved:",{event:r,newStart:a.format(),newEnd:n.format()}),d.Ay.success("Etkinlik ta\u015f\u0131nd\u0131")}catch(r){console.error("Drop error:",r),d.Ay.error("Etkinlik ta\u015f\u0131namad\u0131")}}),[]);(0,a.useEffect)((()=>{const e=e=>{if(!e)return D()();try{const t=D()(e);return t.isValid()?t:D()()}catch(t){return console.error("Invalid date:",e),D()()}},a=(r||[]).map((t=>({...t,type:"meeting",start:e(t.start_time||t.start_date),end:e(t.end_time||t.end_date),title:t.meeting_title||t.title,color:"#722ed1"}))),l=(n||[]).map((t=>({...t,type:"leave",start:e(t.start_date),end:e(t.end_date),title:`${t.personnel_name} - ${t.leave_type}`,color:"#faad14"}))),s=[...(t||[]).map((t=>({...t,type:"event",start:e(t.start_date),end:e(t.end_date),title:t.title||"Untitled Event",color:"#1890ff"}))),...a,...l].filter((e=>!!V.types.includes(e.type)&&("future"===V.timeRange?e.start.isAfter(D()()):"past"!==V.timeRange||e.start.isBefore(D()())))),i=z().sortBy(s,[e=>e.start.valueOf(),e=>e.end.valueOf()]);Y(i)}),[t,r,n,V]);const re=(e,t)=>t.some((t=>e.id!==t.id&&D()(e.start).isBefore(D()(t.end))&&D()(e.end).isAfter(D()(t.start)))),ae=(e,t)=>(0,B.jsx)("div",{draggable:!0,onDragStart:t=>Q(t,e),className:"mb-4 border-l-4 pl-4 py-2",style:{borderLeftColor:e.color,backgroundColor:J[U].cardBackground,borderRadius:"0 4px 4px 0",boxShadow:t?"0 0 0 2px #ff4d4f":"0 2px 4px rgba(0,0,0,0.1)",cursor:"pointer"},onClick:()=>{M(e),$(!0)},children:(0,B.jsxs)(h.A,{direction:"vertical",size:1,className:"w-full",children:[(0,B.jsxs)(h.A,{align:"center",children:[(0,B.jsx)(c.A,{color:e.color}),(0,B.jsx)(O,{strong:!0,className:"text-lg",style:{color:J[U].textColor},children:e.title}),(0,B.jsx)(j.A,{color:e.color,children:"meeting"===e.type?"Toplant\u0131":"event"===e.type?"Etkinlik":"\u0130zin"}),t&&(0,B.jsx)(j.A,{color:"error",children:"\xc7ak\u0131\u015fma Var!"})]}),(0,B.jsxs)(h.A,{size:"large",className:"mt-2",children:[(0,B.jsxs)(h.A,{children:[(0,B.jsx)(w.A,{className:"text-gray-400"}),(0,B.jsxs)(O,{type:"secondary",children:[D()(e.start).format("HH:mm")," - ",D()(e.end).format("HH:mm")]})]}),"meeting"===e.type&&e.participants&&(0,B.jsxs)(h.A,{children:[(0,B.jsx)(A.A,{className:"text-gray-400"}),(0,B.jsxs)(O,{type:"secondary",children:[e.participants.length," Kat\u0131l\u0131mc\u0131"]})]})]})]})}),le=(e,t)=>(0,B.jsxs)("div",{className:"timeline-view",style:{position:"relative",height:"1440px",overflow:"hidden"},children:[Z.map(((e,t)=>(0,B.jsx)("div",{className:"time-slot",style:{position:"relative",height:"60px",borderBottom:"1px solid #f0f0f0",padding:"4px"},children:(0,B.jsx)(O,{type:"secondary",className:"text-xs",children:e.format("HH:mm")})},e.format("HH:mm")))),t.map(((e,r)=>{const a=D()(e.start),l=D()(e.end),n=60*a.hours()+a.minutes(),s=D().duration(l.diff(a)).asMinutes(),i=re(e,t),o=Math.min(s,1440-n)/60*60;return(0,B.jsxs)("div",{style:{position:"absolute",top:n/60*60+"px",left:i?"100px":"60px",right:"10px",height:`${o}px`,backgroundColor:i?`${e.color}dd`:e.color,borderRadius:"4px",padding:"4px 8px",overflow:"hidden",cursor:"pointer",border:i?"2px dashed #fff":"none",zIndex:i?2:1},onClick:()=>{M(e),$(!0)},children:[(0,B.jsx)(O,{strong:!0,style:{color:"#fff"},children:e.title}),(0,B.jsxs)(O,{style:{color:"#fff",fontSize:"12px"},children:[a.format("HH:mm")," - ",l.format("HH:mm")]}),i&&(0,B.jsx)(j.A,{color:"error",className:"mt-1",children:"\xc7ak\u0131\u015fma Var!"})]},`${e.id}-${r}`)}))]}),ne=(e,t)=>(0,B.jsx)(x.A,{dataSource:t,renderItem:e=>{const r=re(e,t);return(0,B.jsx)(x.A.Item,{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>{M(e),$(!0)},children:(0,B.jsx)(x.A.Item.Meta,{avatar:(0,B.jsx)(c.A,{color:e.color,style:{width:"40px",height:"40px",lineHeight:"40px"}}),title:(0,B.jsxs)(h.A,{children:[(0,B.jsx)(O,{strong:!0,children:e.title}),r&&(0,B.jsx)(j.A,{color:"error",children:"\xc7ak\u0131\u015fma Var!"})]}),description:(0,B.jsxs)(h.A,{direction:"vertical",size:1,children:[(0,B.jsxs)(h.A,{children:[(0,B.jsx)(w.A,{}),(0,B.jsxs)(O,{type:"secondary",children:[D()(e.start).format("HH:mm")," - ",D()(e.end).format("HH:mm")]})]}),"meeting"===e.type&&e.participants&&(0,B.jsxs)(h.A,{children:[(0,B.jsx)(A.A,{}),(0,B.jsxs)(O,{type:"secondary",children:[e.participants.length," Kat\u0131l\u0131mc\u0131"]})]})]})})})}}),se=(e,t)=>(0,B.jsx)("div",{children:t.length>0?t.map(((e,r)=>{const a=re(e,t);return(0,B.jsx)("div",{children:ae(e,a)},`${e.type}-${r}`)})):(0,B.jsx)(p.A,{description:(0,B.jsx)(O,{style:{color:J[U].textColor},children:"Bu tarihte etkinlik bulunmuyor"}),className:"my-8"})});return(0,B.jsxs)("div",{className:"agenda-view",style:{backgroundColor:J[U].background,minHeight:"100vh"},children:[(0,B.jsx)("div",{className:"p-6 mb-6 shadow-sm",style:{backgroundColor:J[U].cardBackground},children:(0,B.jsx)("div",{className:"container mx-auto",children:(0,B.jsxs)(h.A,{className:"w-full justify-between items-center",children:[(0,B.jsxs)(h.A,{size:"large",children:[(0,B.jsxs)(l.A,{value:o,onChange:m,className:"w-32",dropdownMatchSelectWidth:!1,children:[(0,B.jsx)(R,{value:"day",children:"G\xfcnl\xfck"}),(0,B.jsx)(R,{value:"workWeek",children:"\u0130\u015f Haftas\u0131"}),(0,B.jsx)(R,{value:"week",children:"Haftal\u0131k"})]}),(0,B.jsxs)(S.Ay.Group,{value:f,onChange:e=>k(e.target.value),optionType:"button",buttonStyle:"solid",children:[(0,B.jsx)(S.Ay.Button,{value:"agenda",children:"Ajanda"}),(0,B.jsx)(S.Ay.Button,{value:"timeline",children:"Zaman \xc7izelgesi"}),(0,B.jsx)(S.Ay.Button,{value:"list",children:"Liste"})]}),(0,B.jsx)(g.Ay,{icon:(0,B.jsx)(E.A,{}),onClick:()=>G(!0),children:"Filtrele"}),(0,B.jsx)(g.Ay,{type:"default",onClick:()=>i(D()()),icon:(0,B.jsx)(y.A,{}),children:"Bug\xfcn"})]}),(0,B.jsxs)(h.A,{size:"large",align:"center",children:[(0,B.jsx)(g.Ay,{type:"text",icon:(0,B.jsx)(H.A,{}),onClick:()=>i((e=>D()(e).subtract(1,"day"===o?"days":"weeks")))}),(0,B.jsx)(I,{level:2,style:{margin:0,color:J[U].textColor},children:s.format("DD MMMM YYYY")}),(0,B.jsx)(g.Ay,{type:"text",icon:(0,B.jsx)(T.A,{}),onClick:()=>i((e=>D()(e).add(1,"day"===o?"days":"weeks")))})]})]})})}),(0,B.jsx)("div",{className:"container mx-auto px-4",children:(0,B.jsx)("div",{className:"grid grid-cols-1 gap-8",children:(()=>{switch(o){case"week":return Array.from({length:7},((e,t)=>D()(s).startOf("week").add(t,"days")));case"workWeek":return Array.from({length:5},((e,t)=>D()(s).startOf("week").add(t,"days")));default:return[D()(s)]}})().map((e=>{const t=(e=>v.filter((t=>{const r=D()(t.start).startOf("day"),a=D()(t.end).startOf("day");return D()(e).startOf("day").isBetween(r,a,"day","[]")})))(e);return(0,B.jsxs)(u.A,{onDragOver:X,onDragLeave:ee,onDrop:t=>te(t,e),title:(0,B.jsxs)(h.A,{children:[(0,B.jsx)(y.A,{}),(0,B.jsx)(O,{style:{color:J[U].textColor},children:e.format("dddd")}),e.isSame(D()(),"day")&&(0,B.jsx)(c.A,{status:"processing",text:"Bug\xfcn"})]}),style:{backgroundColor:J[U].cardBackground},className:"shadow-sm hover:shadow-md transition-shadow",children:["agenda"===f&&se(0,t),"timeline"===f&&le(0,t),"list"===f&&ne(0,t)]},e.format())}))})}),(0,B.jsx)(_.A,{title:"Etkinlik Detaylar\u0131",placement:"right",onClose:()=>$(!1),open:N,width:500,children:b&&(0,B.jsxs)(h.A,{direction:"vertical",size:"large",className:"w-full",children:[(0,B.jsx)(I,{level:3,children:b.title}),(0,B.jsxs)(h.A,{direction:"vertical",children:[(0,B.jsx)(j.A,{color:b.color,children:"meeting"===b.type?"Toplant\u0131":"event"===b.type?"Etkinlik":"\u0130zin"}),(0,B.jsxs)(h.A,{children:[(0,B.jsx)(w.A,{}),(0,B.jsxs)(O,{children:[D()(b.start).format("DD MMMM YYYY, HH:mm")," -",D()(b.end).format("HH:mm")]})]}),"meeting"===b.type&&b.participants&&(0,B.jsxs)("div",{children:[(0,B.jsx)(O,{strong:!0,children:"Kat\u0131l\u0131mc\u0131lar:"}),(0,B.jsx)("div",{className:"mt-2",children:b.participants.map(((e,t)=>(0,B.jsxs)(j.A,{className:"mb-2",children:[(0,B.jsx)(A.A,{})," ",e.name||e.personnel_name||e,e.attendance_status&&(0,B.jsx)(j.A,{color:"accepted"===e.attendance_status?"success":"declined"===e.attendance_status?"error":"warning",className:"ml-2",children:"accepted"===e.attendance_status?"Kat\u0131l\u0131yor":"declined"===e.attendance_status?"Kat\u0131lm\u0131yor":"Yan\u0131t Bekleniyor"})]},t)))})]}),"leave"===b.type&&(0,B.jsxs)("div",{children:[(0,B.jsx)(O,{strong:!0,children:"\u0130zin Durumu:"}),(0,B.jsx)(j.A,{color:"Approved"===b.status?"success":"processing",children:b.status})]}),b.description&&(0,B.jsxs)("div",{children:[(0,B.jsx)(O,{strong:!0,children:"A\xe7\u0131klama:"}),(0,B.jsx)(K,{children:b.description})]})]})]})}),(0,B.jsx)(_.A,{title:"Filtreleme Se\xe7enekleri",placement:"right",onClose:()=>G(!1),open:P,children:(0,B.jsxs)(h.A,{direction:"vertical",size:"large",className:"w-full",children:[(0,B.jsxs)("div",{children:[(0,B.jsx)(I,{level:5,children:"Etkinlik T\xfcrleri"}),(0,B.jsx)(C.A.Group,{options:[{label:"Etkinlikler",value:"event"},{label:"Toplant\u0131lar",value:"meeting"},{label:"\u0130zinler",value:"leave"}],value:V.types,onChange:e=>W((t=>({...t,types:e})))})]}),(0,B.jsxs)("div",{children:[(0,B.jsx)(I,{level:5,children:"Zaman Aral\u0131\u011f\u0131"}),(0,B.jsx)(S.Ay.Group,{value:V.timeRange,onChange:e=>W((t=>({...t,timeRange:e.target.value}))),children:(0,B.jsxs)(h.A,{direction:"vertical",children:[(0,B.jsx)(S.Ay,{value:"all",children:"T\xfcm\xfc"}),(0,B.jsx)(S.Ay,{value:"future",children:"Gelecek Etkinlikler"}),(0,B.jsx)(S.Ay,{value:"past",children:"Ge\xe7mi\u015f Etkinlikler"})]})})]}),(0,B.jsxs)("div",{children:[(0,B.jsx)(I,{level:5,children:"Tema"}),(0,B.jsx)(S.Ay.Group,{value:U,onChange:e=>q(e.target.value),children:(0,B.jsxs)(h.A,{direction:"vertical",children:[(0,B.jsx)(S.Ay,{value:"light",children:"A\xe7\u0131k Tema"}),(0,B.jsx)(S.Ay,{value:"dark",children:"Koyu Tema"}),(0,B.jsx)(S.Ay,{value:"colorful",children:"Renkli Tema"})]})})]})]})})]})},{Option:P}=l.A,{TextArea:G}=n.A,{RangePicker:L}=s.A,{TabPane:F}=i.A,V=e=>{let{canEdit:t,canCreate:r,canDelete:s}=e;const[b,M]=(0,a.useState)([]),[_,C]=(0,a.useState)([]),[S,w]=(0,a.useState)([]),[E,H]=(0,a.useState)([]),[T,N]=(0,a.useState)(null),[z,I]=(0,a.useState)(!1),[O]=o.A.useForm(),[K,R]=(0,a.useState)(!1),[V,W]=(0,a.useState)(null),[U,q]=(0,a.useState)(D()().format("YYYY-MM")),[J,Z]=(0,a.useState)([]),[Q,X]=(0,a.useState)("month"),ee=Y.A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5001",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});(0,a.useEffect)((()=>{te()}),[]);const te=async()=>{R(!0);try{const[e,t,r,a]=await Promise.all([ee.get("/api/calendar/events"),ee.get("/api/calendar/leaves"),ee.get("/api/calendar/birthdays"),ee.get("/api/meetings")]);M(e.data||[]),C(t.data||[]),w(r.data||[]),Z(a.data||[])}catch(e){console.error("Error fetching calendar data:",e),d.Ay.error("Veri y\xfcklenirken bir hata olu\u015ftu")}finally{R(!1)}};return(0,B.jsx)("div",{children:(0,B.jsxs)(h.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:[r&&(0,B.jsx)(g.Ay,{type:"primary",icon:(0,B.jsx)(v.A,{}),onClick:()=>I(!0),children:"Yeni Etkinlik"}),(0,B.jsxs)(i.A,{activeKey:Q,onChange:X,className:"bg-white p-4 rounded-lg shadow",children:[(0,B.jsx)(F,{tab:"Ayl\u0131k G\xf6r\xfcn\xfcm",children:(0,B.jsx)(f.A,{cellRender:(e,t)=>{if("date"!==t.type)return null;const r=e.format("YYYY-MM-DD"),a=b.filter((e=>{const t=D()(e.start_date).format("YYYY-MM-DD"),a=D()(e.end_date).format("YYYY-MM-DD");return r>=t&&r<=a})),l=_.filter((e=>{const t=D()(e.start_date).format("YYYY-MM-DD"),a=D()(e.end_date).format("YYYY-MM-DD");return r>=t&&r<=a})),n=S.filter((e=>{if(!e.birth_date)return!1;return D()(e.birth_date).format("MM-DD")===D()(r).format("MM-DD")})),s=J.filter((e=>{const t=D()(e.start_time).format("YYYY-MM-DD"),a=D()(e.end_time).format("YYYY-MM-DD");return r>=t&&r<=a})),i=a.length>0,o=l.length>0,d=n.length>0,m=s.length>0;return i||o||d||m?(0,B.jsxs)("ul",{className:"events",style:{listStyle:"none",padding:0,margin:0},children:[i&&(0,B.jsx)("li",{children:(0,B.jsx)(c.A,{status:"processing",text:`${a.length} Etkinlik`})}),m&&(0,B.jsx)("li",{children:(0,B.jsx)(c.A,{status:"warning",text:`${s.length} Toplant\u0131`,style:{color:"#722ed1"}})}),o&&(0,B.jsx)("li",{children:(0,B.jsx)(c.A,{status:"warning",text:(0,B.jsxs)(h.A,{children:[(0,B.jsx)(A.A,{style:{color:"#faad14"}}),`${l.length} \u0130zin`]})})}),d&&(0,B.jsx)("li",{children:(0,B.jsx)(c.A,{status:"success",text:(0,B.jsxs)(h.A,{children:[(0,B.jsx)("span",{role:"img","aria-label":"birthday",children:"\ud83c\udf82"}),`${n.length} Do\u011fum G\xfcn\xfc`]})})})]}):null},onSelect:e=>{const t=e.format("YYYY-MM-DD").startsWith(U),a=e.format("YYYY-MM-DD"),l=b.filter((e=>{const t=D()(e.start_date).format("YYYY-MM-DD"),r=D()(e.end_date).format("YYYY-MM-DD");return a>=t&&a<=r})),n=_.filter((e=>{const t=D()(e.start_date).format("YYYY-MM-DD"),r=D()(e.end_date).format("YYYY-MM-DD");return a>=t&&a<=r})),s=S.filter((e=>{if(!e.birth_date)return!1;return D()(e.birth_date).format("MM-DD")===D()(a).format("MM-DD")})),i=J.filter((e=>{const t=D()(e.start_time).format("YYYY-MM-DD"),r=D()(e.end_time).format("YYYY-MM-DD");return a>=t&&a<=r}));l.length>0||n.length>0||s.length>0||i.length>0?m.A.info({title:`${e.format("DD MMMM YYYY")} - Detaylar`,width:600,maskClosable:!0,content:(0,B.jsxs)("div",{children:[l.length>0&&(0,B.jsx)(u.A,{title:(0,B.jsxs)(h.A,{children:[(0,B.jsx)(y.A,{style:{color:"#1890ff"}}),"Etkinlikler"]}),size:"small",style:{marginBottom:16},children:(0,B.jsx)(x.A,{size:"small",dataSource:l,renderItem:e=>{var t;return(0,B.jsx)(x.A.Item,{children:(0,B.jsxs)(h.A,{children:[(0,B.jsx)("span",{children:e.title}),(null===(t=e.participants)||void 0===t?void 0:t.length)>0&&(0,B.jsxs)(j.A,{color:"blue",children:[e.participants.length," Kat\u0131l\u0131mc\u0131"]})]})})}})}),n.length>0&&(0,B.jsx)(u.A,{title:(0,B.jsxs)(h.A,{children:[(0,B.jsx)(A.A,{style:{color:"#faad14"}}),"\u0130zinli Personel"]}),size:"small",style:{marginBottom:16},children:(0,B.jsx)(x.A,{size:"small",dataSource:n,renderItem:e=>(0,B.jsx)(x.A.Item,{children:(0,B.jsxs)(h.A,{children:[(0,B.jsx)("span",{children:e.personnel_name}),(0,B.jsx)(j.A,{color:"orange",children:e.leave_type})]})})})}),s.length>0&&(0,B.jsx)(u.A,{title:(0,B.jsxs)(h.A,{children:[(0,B.jsx)(k.A,{style:{color:"#52c41a"}}),"Do\u011fum G\xfcnleri"]}),size:"small",children:(0,B.jsx)(x.A,{size:"small",dataSource:s,renderItem:e=>(0,B.jsx)(x.A.Item,{children:(0,B.jsxs)(h.A,{children:[(0,B.jsx)("span",{role:"img","aria-label":"birthday",children:"\ud83c\udf82"}),(0,B.jsx)("span",{children:e.full_name})]})})})}),i.length>0&&(0,B.jsx)(u.A,{title:"Toplant\u0131lar",size:"small",style:{marginBottom:16},children:(0,B.jsx)(x.A,{size:"small",dataSource:i,renderItem:e=>{var t;return(0,B.jsx)(x.A.Item,{children:(0,B.jsxs)(h.A,{children:[(0,B.jsx)(y.A,{style:{color:"#722ed1"}}),(0,B.jsx)("span",{children:e.title}),(0,B.jsxs)(j.A,{color:"purple",children:[D()(e.start_time).format("HH:mm")," -",D()(e.end_time).format("HH:mm")]}),(null===(t=e.participants)||void 0===t?void 0:t.length)>0&&(0,B.jsxs)(j.A,{color:"blue",children:[e.participants.length," Kat\u0131l\u0131mc\u0131"]})]})})}})}),0===l.length&&0===n.length&&0===s.length&&0===i.length&&(0,B.jsx)(p.A,{description:"Bu tarihte herhangi bir etkinlik bulunmuyor"})]}),footer:r?(0,B.jsxs)(h.A,{children:[(0,B.jsx)(g.Ay,{onClick:()=>m.A.destroyAll(),children:"Kapat"}),(0,B.jsx)(g.Ay,{type:"primary",icon:(0,B.jsx)(v.A,{}),onClick:()=>{m.A.destroyAll(),I(!0)},children:"Etkinlik Ekle"})]}):(0,B.jsx)(g.Ay,{onClick:()=>m.A.destroyAll(),children:"Kapat"})}):r&&t&&I(!0)},onPanelChange:(e,t)=>{const r=e.format("YYYY-MM");q(r)},loading:K})},"month"),(0,B.jsx)(F,{tab:"Y\u0131ll\u0131k G\xf6r\xfcn\xfcm",children:(0,B.jsx)(f.A,{mode:"year",onSelect:e=>{const t=e.startOf("month");q(t.format("YYYY-MM")),X("month")},onPanelChange:(e,t)=>{"month"===t&&(q(e.format("YYYY-MM")),X("month"))}})},"year"),(0,B.jsx)(F,{tab:"Ajanda",children:(0,B.jsx)($,{events:b,meetings:J,leaves:_})},"agenda")]}),(0,B.jsx)(m.A,{title:V?"Etkinlik D\xfczenle":"Yeni Etkinlik",open:z,onCancel:()=>{I(!1),W(null),O.resetFields()},footer:null,children:(0,B.jsxs)(o.A,{form:O,layout:"vertical",onFinish:async e=>{try{R(!0);const t=e.date_range[0].toISOString(),r=e.date_range[1].toISOString(),a={title:e.title,description:e.description,event_type:e.event_type,start_date:t,end_date:r,participants:e.participants||[]};console.log("Creating event with data:",a);const l=await ee.post("/api/calendar/events",a);l.data&&(d.Ay.success("Etkinlik ba\u015far\u0131yla olu\u015fturuldu"),M([...b,l.data]),I(!1),O.resetFields(),te())}catch(t){console.error("Error adding event:",t),d.Ay.error("Etkinlik olu\u015fturulurken bir hata olu\u015ftu")}finally{R(!1)}},initialValues:V&&{...V,date_range:[D()(V.start_date),D()(V.end_date)]},children:[(0,B.jsx)(o.A.Item,{name:"title",label:"Etkinlik Ba\u015fl\u0131\u011f\u0131",rules:[{required:!0,message:"L\xfctfen etkinlik ba\u015fl\u0131\u011f\u0131 girin"}],children:(0,B.jsx)(n.A,{})}),(0,B.jsx)(o.A.Item,{name:"event_type",label:"Etkinlik T\xfcr\xfc",rules:[{required:!0,message:"L\xfctfen etkinlik t\xfcr\xfc se\xe7in"}],children:(0,B.jsxs)(l.A,{children:[(0,B.jsx)(P,{value:"meeting",children:"Toplant\u0131"}),(0,B.jsx)(P,{value:"training",children:"E\u011fitim"}),(0,B.jsx)(P,{value:"social",children:"Sosyal Etkinlik"}),(0,B.jsx)(P,{value:"other",children:"Di\u011fer"})]})}),(0,B.jsx)(o.A.Item,{name:"date_range",label:"Tarih Aral\u0131\u011f\u0131",rules:[{required:!0,message:"L\xfctfen tarih aral\u0131\u011f\u0131 se\xe7in"}],children:(0,B.jsx)(L,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",style:{width:"100%"}})}),(0,B.jsx)(o.A.Item,{name:"description",label:"A\xe7\u0131klama",children:(0,B.jsx)(G,{rows:4})}),(0,B.jsx)(o.A.Item,{name:"participants",label:"Kat\u0131l\u0131mc\u0131lar",children:(0,B.jsx)(l.A,{mode:"multiple",placeholder:"Kat\u0131l\u0131mc\u0131lar\u0131 se\xe7in",optionFilterProp:"label",style:{width:"100%"},options:E,filterOption:(e,t)=>{var r;return null===t||void 0===t||null===(r=t.label)||void 0===r?void 0:r.toLowerCase().includes(e.toLowerCase())}})}),(0,B.jsx)(o.A.Item,{children:(0,B.jsxs)(h.A,{children:[(0,B.jsx)(g.Ay,{type:"primary",htmlType:"submit",loading:K,children:V?"G\xfcncelle":"Kaydet"}),(0,B.jsx)(g.Ay,{onClick:()=>{I(!1),W(null),O.resetFields()},children:"\u0130ptal"}),s&&V&&(0,B.jsx)(g.Ay,{danger:!0,onClick:async()=>{if(!V)return d.Ay.error("Silinecek bir etkinlik se\xe7ilmedi.");m.A.confirm({title:"Etkinli\u011fi silmek istedi\u011finizden emin misiniz?",onOk:async()=>{try{await ee.delete(`/api/calendar/events/${V.id}`),M(b.filter((e=>e.id!==V.id))),W(null),d.Ay.success("Etkinlik ba\u015far\u0131yla silindi.")}catch(e){console.error("Error deleting event:",e),d.Ay.error("Etkinlik silinirken bir hata olu\u015ftu.")}}})},children:"Sil"})]})})]})})]})})}}}]);