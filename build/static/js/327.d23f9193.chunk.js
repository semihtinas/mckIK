"use strict";(self.webpackChunkmuse_dashboard=self.webpackChunkmuse_dashboard||[]).push([[327],{327:(e,t,a)=>{a.r(t),a.d(t,{default:()=>H});var n=a(9950),r=a(2056),l=a(8902),s=a(9246),o=a(9796),i=a(7465),d=a(9378),c=a(4513),h=a(9051),p=a.n(h),u=a(4414);const m=e=>{let{personnelData:t,showUploadModal:a}=e;const[l,h]=(0,n.useState)({email:"",phone:""}),[m,x]=(0,n.useState)("");return(0,n.useEffect)((()=>{t&&t.id&&s.A.get(`http://localhost:5001/api/contact/${t.id}`).then((e=>{h({email:e.data.email,phone:e.data.phone_number})})).catch((e=>{console.error("Error fetching contact details:",e)})),t&&t.hire_date&&(e=>{if(e){const t=p()(e),a=p()(),n=p().duration(a.diff(t)),r=n.years(),l=n.months(),s=n.days();let o="";r>0&&(o+=`${r} year(s) `),l>0&&(o+=`${l} month(s) `),s>0&&(o+=`${s} day(s)`),x(o.trim())}})(t.hire_date)}),[t]),(0,u.jsxs)(r.A,{title:`${t.first_name||""} ${t.last_name||""}`,children:[(0,u.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,u.jsx)(o.A,{size:100,src:t.photo_url?`http://localhost:5001${t.photo_url}`:null,icon:!t.photo_url&&(0,u.jsx)(d.A,{})}),(0,u.jsx)(c.A,{style:{position:"absolute",bottom:0,right:0,fontSize:"20px",cursor:"pointer"},onClick:a})]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"First Name:"})," ",t.first_name]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Last Name:"})," ",t.last_name]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Email:"})," ",l.email||"N/A"]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Phone:"})," ",l.phone||"N/A"]}),t.department&&(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Department:"})," ",t.department]}),t.title&&(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Title:"})," ",t.title]}),t.hire_date&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Hire Date:"})," ",new Date(t.hire_date).toLocaleDateString()]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Worked Duration:"})," ",m||"Less than a day"]})]}),(0,u.jsx)(i.Ay,{onClick:()=>window.history.back(),children:"Back to List"})]})};var x=a(6025),A=a(9654),j=a(5376),y=a(5398);const{Option:f}=x.A,g=e=>{let{personnelId:t,refreshPersonnelData:a}=e;const[r,l]=(0,n.useState)([]),[o,d]=(0,n.useState)([]),[c,h]=(0,n.useState)([]),[p,m]=(0,n.useState)(null),[g,v]=(0,n.useState)(null),[b,_]=(0,n.useState)(!1),I=s.A.create({baseURL:"http://localhost:5001",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}),E=async()=>{try{const e=await I.get(`/api/personnel/${t}/career`);l(e.data)}catch(e){console.error("Error fetching career data:",e),A.Ay.error("Kariyer ge\xe7mi\u015fi y\xfcklenirken hata olu\u015ftu")}};(0,n.useEffect)((()=>{(async()=>{_(!0);try{const[e,t]=await Promise.all([I.get("/api/departments"),I.get("/api/titles")]);console.log("Departments data:",e.data),console.log("Titles data:",t.data),d(e.data),h(t.data)}catch(e){console.error("Error fetching initial data:",e),A.Ay.error("Departman ve unvan bilgileri y\xfcklenirken hata olu\u015ftu")}finally{_(!1)}})(),E()}),[t]);return b?(0,u.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",padding:"50px"},children:(0,u.jsx)(j.A,{children:(0,u.jsx)("div",{style:{padding:"50px",textAlign:"center"},children:(0,u.jsx)("p",{children:"Y\xfckleniyor..."})})})}):(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{children:"Departman ve Unvan G\xfcncelleme"}),(0,u.jsx)(x.A,{placeholder:"Departman Se\xe7in",style:{width:"100%",marginBottom:16},onChange:m,value:p,allowClear:!0,loading:b,showSearch:!0,optionFilterProp:"children",children:o.map((e=>(0,u.jsx)(f,{value:e.id,children:e.name},e.id)))}),(0,u.jsx)(x.A,{placeholder:"Unvan Se\xe7in",style:{width:"100%",marginBottom:16},onChange:v,value:g,allowClear:!0,loading:b,showSearch:!0,optionFilterProp:"children",children:c.map((e=>(0,u.jsx)(f,{value:e.id,children:e.name},e.id)))}),(0,u.jsx)(i.Ay,{type:"primary",onClick:async()=>{try{_(!0),console.log(`Sending request to update department_id: ${p}, title_id: ${g} for personnelId: ${t}`),await I.post(`/api/personnel/${t}/update-department-title`,{department_id:p,title_id:g}),A.Ay.success("Departman ve unvan ba\u015far\u0131yla g\xfcncellendi!"),m(null),v(null),a(),E()}catch(r){var e,n;console.error("Error updating department and title:",r),A.Ay.error((null===(e=r.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||"G\xfcncelleme s\u0131ras\u0131nda hata olu\u015ftu")}finally{_(!1)}},loading:b,disabled:!p||!g,children:"Departman ve Unvan\u0131 G\xfcncelle"}),(0,u.jsx)("h3",{children:"Kariyer Ge\xe7mi\u015fi"}),(0,u.jsx)(y.A,{bordered:!0,loading:b,dataSource:r,renderItem:e=>(0,u.jsxs)(y.A.Item,{children:[e.hire_date&&(0,u.jsxs)("div",{children:["Tarih: ",new Date(e.hire_date).toLocaleDateString("tr-TR")]}),e.department&&(0,u.jsxs)("div",{children:["Departman: ",e.department]}),e.title&&(0,u.jsxs)("div",{children:["Unvan: ",e.title]})]}),locale:{emptyText:"Kariyer ge\xe7mi\u015fi bulunamad\u0131"}})]})};var v=a(6823),b=a(6550),_=a(1598);const{Option:I}=x.A,E=e=>{let{personnelId:t}=e;const[a,r]=(0,n.useState)([]),[l,o]=(0,n.useState)([]),[d,c]=(0,n.useState)(null),[h,p]=(0,n.useState)([]),m=async()=>{try{const e=await s.A.get(`http://localhost:5001/api/personnel/${t}/files`);o(e.data)}catch(e){console.error("Error refreshing files:",e)}};(0,n.useEffect)((()=>{m(),s.A.get("http://localhost:5001/api/contents").then((e=>{p(e.data)})).catch((e=>{console.error("Error fetching content types:",e)}))}),[t]);const j=[{title:"Content Type",dataIndex:"content_type_name",key:"content_type_name"},{title:"File",dataIndex:"originalname",key:"originalname",render:(e,t)=>(0,u.jsx)("a",{href:`http://localhost:5001/uploads/${t.filename}`,target:"_blank",rel:"noopener noreferrer",children:e})}];return(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{children:"Upload Files"}),(0,u.jsx)(x.A,{placeholder:"Select Content Type",style:{width:"100%",marginBottom:16},onChange:c,value:d,children:h.map((e=>(0,u.jsx)(I,{value:e.id,children:e.name},e.id)))}),(0,u.jsx)(v.A,{multiple:!0,beforeUpload:()=>!1,fileList:a,onChange:e=>{let{fileList:t}=e;r(t)},children:(0,u.jsx)(i.Ay,{icon:(0,u.jsx)(_.A,{}),children:"Select Files"})}),(0,u.jsx)(i.Ay,{type:"primary",onClick:async()=>{const e=new FormData;a.forEach((t=>{e.append("files",t.originFileObj)})),e.append("contentTypeId",d);try{await s.A.post(`http://localhost:5001/api/personnel/${t}/upload-files`,e,{headers:{"Content-Type":"multipart/form-data"}});A.Ay.success("Files uploaded successfully!"),r([]),m()}catch(n){A.Ay.error("Failed to upload files"),console.error("Error uploading files:",n)}},style:{marginTop:16},disabled:0===a.length||!d,children:"Upload Files"}),(0,u.jsx)("h3",{children:"Uploaded Files"}),(0,u.jsx)(b.A,{dataSource:l,columns:j,rowKey:"filename"})]})};var S=a(3561),k=a(7094),D=a(1988),C=a(6092),O=a(5355);const N=e=>{let{personnelId:t,onDataUpdate:a}=e;const[l,o]=(0,n.useState)({health:{},address:{},education:{},contact:{},family:{}}),[d,c]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[m,j]=(0,n.useState)(!1),[y,f]=(0,n.useState)(!1),[g,v]=(0,n.useState)(!1),[b,_]=(0,n.useState)(!1),[I]=S.A.useForm();(0,n.useEffect)((()=>{E()}),[t]);const E=()=>{s.A.get(`http://localhost:5001/api/personnel/${t}/details`).then((e=>{o((t=>({...t,health:e.data.health||{},address:e.data.address||{},education:e.data.education||{},contact:e.data.contact||{},family:e.data.family||{},gender:e.data.gender||t.gender||"",birthdate:e.data.birthdate||t.birthdate||""})))})).catch((e=>console.error("Error fetching personal details:",e)))},N=e=>{I.setFieldsValue(l[e]||{})};return(0,u.jsxs)("div",{children:[(0,u.jsxs)(k.A,{gutter:[16,16],children:[(0,u.jsx)(D.A,{span:8,children:(0,u.jsxs)(r.A,{title:"Personal Information",bordered:!0,className:"custom-card",children:[(0,u.jsxs)("p",{children:["Gender: ",l.gender||"N/A"]}),(0,u.jsxs)("p",{children:["Birthdate: ",l.birthdate?new Date(l.birthdate).toLocaleDateString():"N/A"]}),(0,u.jsx)(i.Ay,{onClick:()=>{N("personalInfo"),_(!0)},className:"edit-button",children:"Edit Personal Info"})]})}),(0,u.jsx)(D.A,{span:8,children:(0,u.jsxs)(r.A,{title:"Health Information",bordered:!0,className:"custom-card",children:[(0,u.jsxs)("p",{children:["Blood Type: ",l.health.blood_type||"N/A"]}),(0,u.jsxs)("p",{children:["Disability Status: ",l.health.disability_status||"N/A"]}),(0,u.jsx)(i.Ay,{onClick:()=>{N("health"),c(!0)},className:"edit-button",children:"Edit Health Info"})]})}),(0,u.jsx)(D.A,{span:8,children:(0,u.jsxs)(r.A,{title:"Education Information",bordered:!0,className:"custom-card",children:[(0,u.jsxs)("p",{children:["Education Level: ",l.education.education_level||"N/A"]}),(0,u.jsxs)("p",{children:["Graduation Year: ",l.education.graduation_year||"N/A"]}),(0,u.jsx)(i.Ay,{onClick:()=>{N("education"),p(!0)},className:"edit-button",children:"Edit Education Info"})]})}),(0,u.jsx)(D.A,{span:8,children:(0,u.jsxs)(r.A,{title:"Address Information",bordered:!0,className:"custom-card",children:[(0,u.jsxs)("p",{children:["Home Address: ",l.address.home_address||"N/A"]}),(0,u.jsxs)("p",{children:["City: ",l.address.city||"N/A"]}),(0,u.jsxs)("p",{children:["District: ",l.address.district||"N/A"]}),(0,u.jsxs)("p",{children:["Postal Code: ",l.address.postal_code||"N/A"]}),(0,u.jsx)(i.Ay,{onClick:()=>{N("address"),j(!0)},className:"edit-button",children:"Edit Address Info"})]})}),(0,u.jsx)(D.A,{span:8,children:(0,u.jsxs)(r.A,{title:"Contact Information",bordered:!0,className:"custom-card",children:[(0,u.jsxs)("p",{children:["Phone Number: ",l.contact.phone_number||"N/A"]}),(0,u.jsxs)("p",{children:["Email: ",l.contact.email||"N/A"]}),(0,u.jsxs)("p",{children:["Emergency Contact Name: ",l.contact.emergency_contact_name||"N/A"]}),(0,u.jsxs)("p",{children:["Emergency Contact Phone: ",l.contact.emergency_contact_phone||"N/A"]}),(0,u.jsx)(i.Ay,{onClick:()=>{N("contact"),f(!0)},className:"edit-button",children:"Edit Contact Info"})]})}),(0,u.jsx)(D.A,{span:8,children:(0,u.jsxs)(r.A,{title:"Family Information",bordered:!0,className:"custom-card",children:[(0,u.jsxs)("p",{children:["Marital Status: ",l.family.marital_status||"N/A"]}),(0,u.jsxs)("p",{children:["Number of Children: ",l.family.number_of_children||"N/A"]}),(0,u.jsx)(i.Ay,{onClick:()=>{N("family"),v(!0)},className:"edit-button",children:"Edit Family Info"})]})})]}),(0,u.jsx)(C.A,{title:"Edit Health Information",open:d,onOk:()=>{const e=I.getFieldsValue();s.A.put(`http://localhost:5001/api/health/${t}`,e).then((()=>{A.Ay.success("Health information updated successfully!"),c(!1),E(),a()})).catch((e=>{console.error("Error updating details:",e),A.Ay.error("Failed to update health information")}))},onCancel:()=>c(!1),children:(0,u.jsxs)(S.A,{form:I,children:[(0,u.jsx)(S.A.Item,{name:"blood_type",label:"Blood Type",children:(0,u.jsxs)(x.A,{children:[(0,u.jsx)(x.A.Option,{value:"A+",children:"A+"}),(0,u.jsx)(x.A.Option,{value:"A-",children:"A-"}),(0,u.jsx)(x.A.Option,{value:"B+",children:"B+"}),(0,u.jsx)(x.A.Option,{value:"B-",children:"B-"}),(0,u.jsx)(x.A.Option,{value:"AB+",children:"AB+"}),(0,u.jsx)(x.A.Option,{value:"AB-",children:"AB-"}),(0,u.jsx)(x.A.Option,{value:"O+",children:"O+"}),(0,u.jsx)(x.A.Option,{value:"O-",children:"O-"})]})}),(0,u.jsx)(S.A.Item,{name:"disability_status",label:"Disability Status",children:(0,u.jsxs)(x.A,{children:[(0,u.jsx)(x.A.Option,{value:"No Disability",children:"No Disability"}),(0,u.jsx)(x.A.Option,{value:"1st Degree",children:"1st Degree"}),(0,u.jsx)(x.A.Option,{value:"2nd Degree",children:"2nd Degree"}),(0,u.jsx)(x.A.Option,{value:"3rd Degree",children:"3rd Degree"})]})})]})}),(0,u.jsx)(C.A,{title:"Edit Education Information",open:h,onOk:()=>{const e=I.getFieldsValue();s.A.put(`http://localhost:5001/api/education/${t}`,e).then((()=>{A.Ay.success("Education information updated successfully!"),p(!1),E(),a()})).catch((e=>{console.error("Error updating details:",e),A.Ay.error("Failed to update education information")}))},onCancel:()=>p(!1),children:(0,u.jsxs)(S.A,{form:I,children:[(0,u.jsx)(S.A.Item,{name:"education_level",label:"Education Level",children:(0,u.jsxs)(x.A,{children:[(0,u.jsx)(x.A.Option,{value:"\u0130lkokul",children:"\u0130lkokul"}),(0,u.jsx)(x.A.Option,{value:"Ortaokul",children:"Ortaokul"}),(0,u.jsx)(x.A.Option,{value:"Lise",children:"Lise"}),(0,u.jsx)(x.A.Option,{value:"\xd6n Lisans",children:"\xd6n Lisans"}),(0,u.jsx)(x.A.Option,{value:"Lisans",children:"Lisans"}),(0,u.jsx)(x.A.Option,{value:"Lisans\xfcst\xfc",children:"Lisans\xfcst\xfc"})]})}),(0,u.jsx)(S.A.Item,{name:"graduation_year",label:"Graduation Year",children:(0,u.jsx)(O.A,{})})]})}),(0,u.jsx)(C.A,{title:"Edit Address Information",open:m,onOk:()=>{const e=I.getFieldsValue();s.A.put(`http://localhost:5001/api/address/${t}`,e).then((()=>{A.Ay.success("Address information updated successfully!"),j(!1),E(),a()})).catch((e=>{console.error("Error updating details:",e),A.Ay.error("Failed to update address information")}))},onCancel:()=>j(!1),children:(0,u.jsxs)(S.A,{form:I,children:[(0,u.jsx)(S.A.Item,{name:"home_address",label:"Home Address",children:(0,u.jsx)(O.A,{})}),(0,u.jsx)(S.A.Item,{name:"city",label:"City",children:(0,u.jsx)(O.A,{})}),(0,u.jsx)(S.A.Item,{name:"district",label:"District",children:(0,u.jsx)(O.A,{})}),(0,u.jsx)(S.A.Item,{name:"postal_code",label:"Postal Code",children:(0,u.jsx)(O.A,{})})]})}),(0,u.jsx)(C.A,{title:"Edit Contact Information",open:y,onOk:()=>{const e=I.getFieldsValue();s.A.put(`http://localhost:5001/api/contact/${t}`,e).then((()=>{A.Ay.success("Contact information updated successfully!"),f(!1),E(),a()})).catch((e=>{console.error("Error updating details:",e),A.Ay.error("Failed to update contact information")}))},onCancel:()=>f(!1),children:(0,u.jsxs)(S.A,{form:I,children:[(0,u.jsx)(S.A.Item,{name:"phone_number",label:"Phone Number",children:(0,u.jsx)(O.A,{})}),(0,u.jsx)(S.A.Item,{name:"email",label:"Email",children:(0,u.jsx)(O.A,{})}),(0,u.jsx)(S.A.Item,{name:"emergency_contact_name",label:"Emergency Contact Name",children:(0,u.jsx)(O.A,{})}),(0,u.jsx)(S.A.Item,{name:"emergency_contact_phone",label:"Emergency Contact Phone",children:(0,u.jsx)(O.A,{})})]})}),(0,u.jsx)(C.A,{title:"Edit Personal Information",open:b,onOk:()=>{const e=I.getFieldsValue();s.A.put(`http://localhost:5001/api/personnel/${t}/personal-info`,e).then((()=>{A.Ay.success("Personal information updated successfully!"),_(!1),E(),a()})).catch((e=>{console.error("Error updating personal information:",e),A.Ay.error("Failed to update personal information")}))},onCancel:()=>_(!1),children:(0,u.jsxs)(S.A,{form:I,children:[(0,u.jsx)(S.A.Item,{name:"gender",label:"Gender",children:(0,u.jsxs)(x.A,{children:[(0,u.jsx)(x.A.Option,{value:"MALE",children:"Male"}),(0,u.jsx)(x.A.Option,{value:"FEMALE",children:"Female"})]})}),(0,u.jsx)(S.A.Item,{name:"birthdate",label:"Birthdate",children:(0,u.jsx)(O.A,{type:"date"})})]})}),(0,u.jsx)(C.A,{title:"Edit Family Information",open:g,onOk:()=>{const e=I.getFieldsValue();void 0===e.number_of_children&&(e.number_of_children=0),s.A.put(`http://localhost:5001/api/family/${t}`,e).then((()=>{A.Ay.success("Family information updated successfully!"),v(!1),E(),a()})).catch((e=>{console.error("Error updating details:",e),A.Ay.error("Failed to update family information")}))},onCancel:()=>v(!1),children:(0,u.jsxs)(S.A,{form:I,children:[(0,u.jsx)(S.A.Item,{name:"marital_status",label:"Marital Status",children:(0,u.jsxs)(x.A,{children:[(0,u.jsx)(x.A.Option,{value:"Single",children:"Single"}),(0,u.jsx)(x.A.Option,{value:"Married",children:"Married"}),(0,u.jsx)(x.A.Option,{value:"Divorced",children:"Divorced"})]})}),(0,u.jsx)(S.A.Item,{name:"number_of_children",label:"Number of Children",children:(0,u.jsx)(O.A,{type:"number",min:0})})]})})]})};var w=a(8349);const{Dragger:F}=v.A,L=e=>{let{personnelId:t,isModalOpen:a,setIsModalOpen:r,refreshPersonnelData:l}=e;const[o,i]=(0,n.useState)([]);return(0,u.jsx)(C.A,{title:"Upload Photo",open:a,onOk:async()=>{if(o.length>0){const a=new FormData;a.append("photo",o[0].originFileObj),a.append("personnelId",t);try{await s.A.post("http://localhost:5001/api/upload-photo",a,{headers:{"Content-Type":"multipart/form-data"}}),A.Ay.success("Photo uploaded successfully!"),r(!1),i([]),l()}catch(e){A.Ay.error("Failed to upload photo"),console.error("Error uploading photo:",e)}}else A.Ay.error("Please select a photo to upload.")},onCancel:()=>r(!1),children:(0,u.jsxs)(F,{beforeUpload:()=>!1,fileList:o,onChange:e=>{let{fileList:t}=e;return i(t)},accept:"image/*",multiple:!1,style:{padding:"20px",border:"2px dashed #d9d9d9",backgroundColor:"#fafafa"},children:[(0,u.jsx)("p",{className:"ant-upload-drag-icon",children:(0,u.jsx)(w.A,{})}),(0,u.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})})};var $=a(8429);const P=e=>{let{personnelId:t,refreshPersonnelData:a}=e;const[r,l]=(0,n.useState)([]);return(0,n.useEffect)((()=>{s.A.get(`http://localhost:5001/api/personnel/${t}/attendance`).then((e=>l(e.data))).catch((e=>console.error("Error fetching attendance data:",e)))}),[t]),(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{children:"Attendance History"}),(0,u.jsx)(y.A,{bordered:!0,dataSource:r,renderItem:e=>(0,u.jsxs)(y.A.Item,{children:[e.entry_date&&(0,u.jsxs)("div",{children:["Entry Date: ",new Date(e.entry_date).toLocaleDateString()]}),e.entry_time&&(0,u.jsxs)("div",{children:["Entry Time: ",e.entry_time]}),e.exit_date&&(0,u.jsxs)("div",{children:["Exit Date: ",new Date(e.exit_date).toLocaleDateString()]}),e.exit_time&&(0,u.jsxs)("div",{children:["Exit Time: ",e.exit_time]})]})})]})},B=e=>{let{personnelId:t}=e;const[a,r]=(0,n.useState)([]),[o,i]=(0,n.useState)([]),[d,c]=(0,n.useState)([]);(0,n.useEffect)((()=>{s.A.get(`http://localhost:5001/api/leave/leaves/pending/${t}`).then((e=>r(e.data))).catch((e=>console.error("Error fetching pending leaves:",e))),s.A.get(`http://localhost:5001/api/leave/leaves/approved/${t}`).then((e=>i(e.data))).catch((e=>console.error("Error fetching approved leaves:",e))),s.A.get(`http://localhost:5001/api/leave/leaves/rejected/${t}`).then((e=>c(e.data))).catch((e=>console.error("Error fetching rejected leaves:",e)))}),[t]);const h=e=>(0,u.jsx)(y.A,{bordered:!0,dataSource:e,renderItem:e=>(0,u.jsx)(y.A.Item,{children:(0,u.jsxs)("div",{children:[(0,u.jsx)("strong",{children:e.personnel_name})," - ",e.leave_type_name,(0,u.jsxs)("div",{children:["Start Date: ",new Date(e.start_date).toLocaleDateString()]}),(0,u.jsxs)("div",{children:["End Date: ",new Date(e.end_date).toLocaleDateString()]}),(0,u.jsxs)("div",{children:["Status: ",e.status]})]})})}),p=[{key:"1",label:"Pending",children:h(a)},{key:"2",label:"Approved",children:h(o)},{key:"3",label:"Rejected",children:h(d)}];return(0,u.jsx)(l.A,{defaultActiveKey:"1",items:p})};var T=a(5621);const M=e=>{let{personnelId:t}=e;const[a,r]=(0,n.useState)([]),[l,o]=(0,n.useState)(!1);(0,n.useEffect)((()=>{t&&(async()=>{o(!0);try{const e=await s.A.get(`http://localhost:5001/api/advance-requests/personnel/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});r(e.data)}catch(e){console.error("Error fetching advance requests:",e),A.Ay.error("Avans talepleri y\xfcklenirken hata olu\u015ftu")}finally{o(!1)}})()}),[t]);const i=[{title:"Talep Tarihi",dataIndex:"request_date",key:"request_date",render:e=>p()(e).format("DD.MM.YYYY HH:mm")},{title:"Tutar",dataIndex:"amount",key:"amount",render:e=>`\u20ba${null===e||void 0===e?void 0:e.toLocaleString()}`},{title:"Durum",dataIndex:"status",key:"status",render:e=>(0,u.jsx)(T.A,{color:{pending:"gold",approved:"green",rejected:"red"}[e],children:{pending:"Bekliyor",approved:"Onayland\u0131",rejected:"Reddedildi"}[e]})},{title:"Talep Nedeni",dataIndex:"reason",key:"reason"},{title:"Onaylayan",dataIndex:"personnel_name",key:"personnel_name"},{title:"Onay/Red Nedeni",dataIndex:"approval_reason",key:"approval_reason"}];return(0,u.jsx)(b.A,{columns:i,dataSource:a,rowKey:"id",loading:l,pagination:{pageSize:10}})},H=e=>{let{userInfo:t}=e;const{id:a}=(0,$.g)(),o=a||(null===t||void 0===t?void 0:t.personnel_id),[i,d]=(0,n.useState)(null),[c,h]=(0,n.useState)([]),[p,x]=(0,n.useState)([]),[A,j]=(0,n.useState)(!1),y=()=>{o?s.A.get(`http://localhost:5001/api/personnel/${o}`).then((e=>d(e.data))).catch((e=>console.error("Error fetching personnel data:",e))):console.error("Ge\xe7erli bir personnelId tan\u0131mlanmad\u0131.")};if((0,n.useEffect)((()=>{o&&y()}),[o]),!i)return(0,u.jsx)("div",{children:"Loading..."});const f=[{key:"1",label:"Profile",children:(0,u.jsx)(m,{personnelData:i,showUploadModal:()=>j(!0)})},{key:"2",label:"Career",children:(0,u.jsx)(g,{personnelId:o,departments:c,titles:p,refreshPersonnelData:y})},{key:"3",label:"Files",children:(0,u.jsx)(E,{personnelId:o})},{key:"4",label:"Ki\u015fisel Bilgiler",children:(0,u.jsx)(N,{personnelId:o,onDataUpdate:y})},{key:"5",label:"Attendance",children:(0,u.jsx)(P,{personnelId:o})},{key:"6",label:"Leave Requests",children:(0,u.jsx)(B,{personnelId:o})},{key:"7",label:"Avans Talepleri",children:(0,u.jsx)(M,{personnelId:o})}];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(r.A,{title:"Personnel Details",children:(0,u.jsx)(l.A,{defaultActiveKey:"1",items:f})}),(0,u.jsx)(L,{personnelId:o,isModalOpen:A,setIsModalOpen:j,refreshPersonnelData:y})]})}},4513:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(8168),r=a(9950);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};var s=a(5085),o=function(e,t){return r.createElement(s.A,(0,n.A)({},e,{ref:t,icon:l}))};const i=r.forwardRef(o)},8349:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(8168),r=a(9950);const l={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};var s=a(5085),o=function(e,t){return r.createElement(s.A,(0,n.A)({},e,{ref:t,icon:l}))};const i=r.forwardRef(o)},1598:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(8168),r=a(9950);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};var s=a(5085),o=function(e,t){return r.createElement(s.A,(0,n.A)({},e,{ref:t,icon:l}))};const i=r.forwardRef(o)},1988:(e,t,a)=>{a.d(t,{A:()=>n});const n=a(5352).A},7094:(e,t,a)=>{a.d(t,{A:()=>n});const n=a(8786).A}}]);