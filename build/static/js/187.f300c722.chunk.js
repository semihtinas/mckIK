"use strict";(self.webpackChunkmuse_dashboard=self.webpackChunkmuse_dashboard||[]).push([[187],{3187:(e,a,t)=>{t.r(a),t.d(a,{default:()=>$});var r=t(9950),l=t(6025),n=t(9654),i=t(8902),s=t(6092),o=t(9246),d=t(3561),c=t(5355),m=t(7465),y=t(6550),h=t(4414);const u=e=>{let{departments:a,fetchDepartments:t}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(d.A,{layout:"vertical",onFinish:async e=>{try{await o.A.post("http://localhost:5001/api/departments",{name:e.name}),n.Ay.success("Department added successfully!"),t()}catch(a){a.response&&a.response.data&&a.response.data.error?n.Ay.error(a.response.data.error):n.Ay.error("Failed to add department")}},children:[(0,h.jsx)(d.A.Item,{name:"name",label:"Department Name",rules:[{required:!0,message:"Please input the department name!"}],children:(0,h.jsx)(c.A,{placeholder:"Enter department name"})}),(0,h.jsx)(d.A.Item,{children:(0,h.jsx)(m.Ay,{type:"primary",htmlType:"submit",children:"Add Department"})})]}),(0,h.jsx)(y.A,{dataSource:a,columns:[{title:"ID",dataIndex:"id",key:"id"},{title:"Department Name",dataIndex:"name",key:"name"}],rowKey:"id"})]})},p=e=>{let{titles:a,fetchTitles:t}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(d.A,{layout:"vertical",onFinish:async e=>{try{await o.A.post("http://localhost:5001/api/titles",e),n.Ay.success("Title added successfully!"),t()}catch(a){a.response&&a.response.data&&a.response.data.error?n.Ay.error(a.response.data.error):n.Ay.error("Failed to add title")}},children:[(0,h.jsx)(d.A.Item,{name:"name",label:"Title Name",rules:[{required:!0,message:"Please input the title name!"}],children:(0,h.jsx)(c.A,{placeholder:"Enter title name"})}),(0,h.jsx)(d.A.Item,{children:(0,h.jsx)(m.Ay,{type:"primary",htmlType:"submit",children:"Add Title"})})]}),(0,h.jsx)(y.A,{dataSource:a,columns:[{title:"ID",dataIndex:"id",key:"id"},{title:"Title Name",dataIndex:"name",key:"name"}],rowKey:"id"})]})};var A=t(6004),x=t(8576);const{TabPane:j}=i.A,{Option:g}=l.A,{TextArea:v}=c.A,k=e=>{let{contentTypes:a,fetchContentTypes:t}=e;const[s,u]=(0,r.useState)([]),[p,k]=(0,r.useState)([]),[b,_]=(0,r.useState)([]),[I]=d.A.useForm();(0,r.useEffect)((()=>{f(),w()}),[]);const f=async()=>{try{const e=await o.A.get("http://localhost:5001/api/expenses-management/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});u(e.data),_(e.data.filter((e=>!e.parent_id)))}catch(e){n.Ay.error("Failed to load expense categories")}},w=async()=>{try{const e=await o.A.get("http://localhost:5001/api/expenses-management/content-types",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});k(e.data)}catch(e){n.Ay.error("Failed to load expense content types")}};return(0,h.jsxs)(i.A,{defaultActiveKey:"1",children:[(0,h.jsxs)(j,{tab:"File Content Types",children:[(0,h.jsxs)(d.A,{layout:"vertical",onFinish:async e=>{try{await o.A.post("http://localhost:5001/api/contents",e),n.Ay.success("Content type added successfully!"),t(),I.resetFields()}catch(a){n.Ay.error("Failed to add content type")}},form:I,children:[(0,h.jsx)(d.A.Item,{name:"name",label:"Content Type Name",rules:[{required:!0,message:"Please input the content type name!"}],children:(0,h.jsx)(c.A,{placeholder:"Enter content type name"})}),(0,h.jsx)(d.A.Item,{children:(0,h.jsx)(m.Ay,{type:"primary",htmlType:"submit",children:"Add Content Type"})})]}),(0,h.jsx)(y.A,{dataSource:a,columns:[{title:"ID",dataIndex:"id",key:"id"},{title:"Content Type Name",dataIndex:"name",key:"name"}],rowKey:"id"})]},"1"),(0,h.jsxs)(j,{tab:"Expense Categories",children:[(0,h.jsx)(d.A,{layout:"vertical",onFinish:async e=>{try{await o.A.post("http://localhost:5001/api/expenses-management/categories",{...e,budget_limit:e.budget_limit?parseFloat(e.budget_limit):null},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),n.Ay.success("Expense category added successfully!"),f(),I.resetFields()}catch(a){n.Ay.error("Failed to add expense category")}},form:I,children:(0,h.jsxs)(A.A,{style:{width:"100%"},direction:"vertical",size:"middle",children:[(0,h.jsx)(d.A.Item,{name:"name",label:"Category Name",rules:[{required:!0,message:"Please input the category name!"}],children:(0,h.jsx)(c.A,{placeholder:"Enter category name"})}),(0,h.jsx)(d.A.Item,{name:"code",label:"Category Code",rules:[{required:!0,message:"Please input the category code!"}],children:(0,h.jsx)(c.A,{placeholder:"Enter category code (e.g., OFG)"})}),(0,h.jsx)(d.A.Item,{name:"description",label:"Description",children:(0,h.jsx)(v,{placeholder:"Enter category description",rows:3})}),(0,h.jsx)(d.A.Item,{name:"parent_id",label:"Parent Category",children:(0,h.jsx)(l.A,{placeholder:"Select parent category",allowClear:!0,children:b.map((e=>(0,h.jsx)(g,{value:e.id,children:e.name},e.id)))})}),(0,h.jsx)(d.A.Item,{name:"budget_limit",label:"Budget Limit",children:(0,h.jsx)(x.A,{style:{width:"100%"},formatter:e=>`\u20ba ${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\u20ba\s?|(,*)/g,""),placeholder:"Enter budget limit (optional)"})}),(0,h.jsx)(d.A.Item,{children:(0,h.jsx)(m.Ay,{type:"primary",htmlType:"submit",children:"Add Category"})})]})}),(0,h.jsx)(y.A,{dataSource:s,columns:[{title:"ID",dataIndex:"id",key:"id"},{title:"Name",dataIndex:"name",key:"name"},{title:"Code",dataIndex:"code",key:"code"},{title:"Parent Category",dataIndex:"parent_name",key:"parent_name",render:(e,a)=>e||"Ana Kategori"},{title:"Budget Limit",dataIndex:"budget_limit",key:"budget_limit",render:e=>e?`\u20ba${e.toLocaleString()}`:"-"},{title:"Monthly Spent",dataIndex:"monthly_spent",key:"monthly_spent",render:e=>`\u20ba${e.toLocaleString()}`}],rowKey:"id"})]},"2"),(0,h.jsxs)(j,{tab:"Expense Content Types",children:[(0,h.jsx)(d.A,{layout:"vertical",onFinish:async e=>{try{const a={...e,file_extensions:e.file_extensions.split(",").map((e=>e.trim())),max_file_size:1024*parseInt(e.max_file_size)*1024};await o.A.post("http://localhost:5001/api/expenses-management/content-types",a,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),n.Ay.success("Expense content type added successfully!"),w(),I.resetFields()}catch(a){n.Ay.error("Failed to add expense content type")}},form:I,children:(0,h.jsxs)(A.A,{style:{width:"100%"},direction:"vertical",size:"middle",children:[(0,h.jsx)(d.A.Item,{name:"name",label:"Content Type Name",rules:[{required:!0,message:"Please input the content type name!"}],children:(0,h.jsx)(c.A,{placeholder:"Enter content type name"})}),(0,h.jsx)(d.A.Item,{name:"description",label:"Description",children:(0,h.jsx)(v,{placeholder:"Enter content type description",rows:3})}),(0,h.jsx)(d.A.Item,{name:"file_extensions",label:"Allowed File Extensions",rules:[{required:!0,message:"Please input allowed file extensions!"}],extra:"Enter extensions separated by commas (e.g., .pdf, .jpg, .png)",children:(0,h.jsx)(c.A,{placeholder:".pdf, .jpg, .png"})}),(0,h.jsx)(d.A.Item,{name:"max_file_size",label:"Maximum File Size (MB)",rules:[{required:!0,message:"Please input maximum file size!"}],children:(0,h.jsx)(x.A,{style:{width:"100%"},min:1,max:50,placeholder:"Enter maximum file size in MB"})}),(0,h.jsx)(d.A.Item,{children:(0,h.jsx)(m.Ay,{type:"primary",htmlType:"submit",children:"Add Content Type"})})]})}),(0,h.jsx)(y.A,{dataSource:p,columns:[{title:"ID",dataIndex:"id",key:"id"},{title:"Name",dataIndex:"name",key:"name"},{title:"Description",dataIndex:"description",key:"description"},{title:"File Extensions",dataIndex:"file_extensions",key:"file_extensions",render:e=>(null===e||void 0===e?void 0:e.join(", "))||"-"},{title:"Max File Size",dataIndex:"max_file_size",key:"max_file_size",render:e=>`${(e/1048576).toFixed(1)} MB`}],rowKey:"id"})]},"3")]})};var b=t(6895),_=t(495),I=t(2460);const{Option:f}=l.A,{TextArea:w}=c.A,S=()=>{const[e,a]=(0,r.useState)([]),[t,s]=(0,r.useState)([]),[u,p]=(0,r.useState)([]),[A,j]=(0,r.useState)([]),[g,v]=(0,r.useState)([]),[k,S]=(0,r.useState)([]),[F,T]=(0,r.useState)([]),[E]=d.A.useForm(),[C]=d.A.useForm(),[Y]=d.A.useForm(),[z]=d.A.useForm(),[K]=d.A.useForm(),[D]=d.A.useForm(),[q,P]=(0,r.useState)([]),[N,B]=(0,r.useState)([]),[M,R]=(0,r.useState)(null),L=()=>({headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});(0,r.useEffect)((()=>{$(),O(),G(),U(),H(),V(),J(),W()}),[]);const $=async()=>{try{const e=await o.A.get("http://localhost:5001/api/leave-management/new-leave-types",L());a(e.data)}catch(t){var e;console.error("Error loading leave types:",t),401===(null===(e=t.response)||void 0===e?void 0:e.status)?window.location.href="/login":n.Ay.error("\u0130zin t\xfcrleri y\xfcklenemedi")}},O=async()=>{try{const e=await o.A.get("http://localhost:5001/api/leave-management/new-leave-calculation-methods",L());s(e.data)}catch(e){n.Ay.error("Failed to fetch calculation methods")}},G=async()=>{try{const e=await o.A.get("http://localhost:5001/api/leave-management/renewal-periods",L());p(e.data)}catch(t){var e,a;401===(null===(e=t.response)||void 0===e?void 0:e.status)||403===(null===(a=t.response)||void 0===a?void 0:a.status)?window.location.href="/login":n.Ay.error("Yenileme periyotlar\u0131 y\xfcklenemedi")}},U=async()=>{try{const e=await o.A.get("http://localhost:5001/api/leave-management/new-leave-condition-types",L());j(e.data)}catch(a){var e;console.error("Error loading condition types:",a),401===(null===(e=a.response)||void 0===e?void 0:e.status)?window.location.href="/login":n.Ay.error("Ko\u015ful t\xfcrleri y\xfcklenemedi")}},H=async()=>{try{const e=await o.A.get("http://localhost:5001/api/leave-management/new-comparison-operators",L());v(e.data)}catch(e){console.error("Error loading comparison operators:",e),n.Ay.error("Kar\u015f\u0131la\u015ft\u0131rma operat\xf6rleri y\xfcklenemedi")}},V=async()=>{try{const e=await o.A.get("http://localhost:5001/api/leave-management/new-leave-type-conditions",L());S(e.data)}catch(a){var e;console.error("Error loading conditions:",a),401===(null===(e=a.response)||void 0===e?void 0:e.status)?window.location.href="/login":n.Ay.error("Ko\u015fullar y\xfcklenemedi")}},J=async()=>{try{const e=await o.A.get("http://localhost:5001/api/leave-management/leave-policies",L());T(e.data)}catch(a){var e;console.error("Error loading policies:",a),401===(null===(e=a.response)||void 0===e?void 0:e.status)?window.location.href="/login":n.Ay.error("Politikalar y\xfcklenemedi")}},W=async()=>{try{const e=await o.A.get("http://localhost:5001/api/leave-management/system-tables",L());P(e.data)}catch(e){n.Ay.error("Tablolar y\xfcklenemedi")}};(0,r.useEffect)((()=>{W()}),[]);const Q=async e=>{try{await o.A.post("http://localhost:5001/api/leave-management/new-leave-types",e,L()),n.Ay.success("\u0130zin t\xfcr\xfc ba\u015far\u0131yla eklendi"),$(),E.resetFields()}catch(t){var a;console.error("Error adding leave type:",t),401===(null===(a=t.response)||void 0===a?void 0:a.status)?window.location.href="/login":n.Ay.error("\u0130zin t\xfcr\xfc eklenemedi")}},X=async e=>{try{console.log("Form values before submission:",e),await o.A.post("http://localhost:5001/api/leave-management/new-leave-type-conditions",e,L()),n.Ay.success("Condition added successfully"),V(),C.resetFields()}catch(t){var a;console.error("Error adding condition:",null===(a=t.response)||void 0===a?void 0:a.data),n.Ay.error("Failed to add condition")}},Z=async e=>{try{console.log("G\xf6nderilen de\u011ferler:",e),await o.A.post("http://localhost:5001/api/leave-management/leave-policies",e,L()),n.Ay.success("Policy added successfully"),J(),Y.resetFields()}catch(a){console.error("Failed to add policy:",a),a.response&&console.log("Sunucu hatas\u0131:",a.response.data),n.Ay.error("Failed to add policy")}},ee=e=>{R(e),(async e=>{try{const a=await o.A.get(`http://localhost:5001/api/leave-management/system-columns/${e}`,L());B(a.data)}catch(a){n.Ay.error("S\xfctunlar y\xfcklenemedi")}})(e),z.setFieldsValue({column_name:null})},ae=async e=>{try{const a=q.find((a=>a.id===e.table_name));a&&(e.table_name=a.table_name),e.possible_values&&"string"===typeof e.possible_values&&""!==e.possible_values.trim()?e.possible_values=JSON.stringify(e.possible_values.split(",").map((e=>e.trim()))):e.possible_values=null,await o.A.post("http://localhost:5001/api/leave-management/new-leave-condition-types",e,L()),n.Ay.success("Ko\u015ful t\xfcr\xfc ba\u015far\u0131yla eklendi"),U(),z.resetFields()}catch(a){console.error("Ko\u015ful t\xfcr\xfc eklenirken hata olu\u015ftu:",a),n.Ay.error("Ko\u015ful t\xfcr\xfc eklenemedi")}},te=async e=>{try{await o.A.post("http://localhost:5001/api/leave-management/new-comparison-operators",e,L()),n.Ay.success("Yeni operat\xf6r ba\u015far\u0131yla eklendi"),H(),K.resetFields()}catch(a){n.Ay.error("Operat\xf6r eklenemedi")}},re=async e=>{try{console.log("Sending data:",e),await o.A.post("http://localhost:5001/api/leave-management/renewal-periods",e,L()),n.Ay.success("Yenileme periyodu ba\u015far\u0131yla eklendi"),G(),D.resetFields()}catch(a){console.error("Error adding renewal period:",a),n.Ay.error("Yenileme periyodu eklenemedi")}},le=[{title:"Code",dataIndex:"code",key:"code"},{title:"Name",dataIndex:"name",key:"name"},{title:"Calculation Method",dataIndex:"calculation_method_id",render:e=>{var a;return(null===(a=t.find((a=>a.id===e)))||void 0===a?void 0:a.name)||"N/A"}},{title:"Renewal Period",dataIndex:"renewal_period_id",render:e=>{var a;return(null===(a=u.find((a=>a.id===e)))||void 0===a?void 0:a.name)||"N/A"}},{title:"Is Paid",dataIndex:"is_paid",render:e=>e?"Yes":"No"},{title:"Event Based",dataIndex:"is_event_based",render:e=>e?"Yes":"No"},{title:"Max Days",dataIndex:"max_days",render:e=>e||"No limit"}],ne=[{title:"Code",dataIndex:"code",key:"code"},{title:"Name",dataIndex:"name",key:"name"},{title:"Table Name",dataIndex:"table_name",key:"table_name"},{title:"Column Name",dataIndex:"column_name",key:"column_name"},{title:"Data Type",dataIndex:"data_type",key:"data_type"},{title:"Possible Values",dataIndex:"possible_values",render:e=>JSON.stringify(e)||"-"},{title:"Description",dataIndex:"description",key:"description"},{title:"Active",dataIndex:"is_active",render:e=>e?"Yes":"No"}],ie=()=>(0,h.jsxs)(d.A,{form:E,layout:"vertical",onFinish:Q,children:[(0,h.jsx)(d.A.Item,{name:"code",label:"Code",rules:[{required:!0}],children:(0,h.jsx)(c.A,{})}),(0,h.jsx)(d.A.Item,{name:"name",label:"Name",rules:[{required:!0}],children:(0,h.jsx)(c.A,{})}),(0,h.jsx)(d.A.Item,{name:"calculation_method_id",label:"Calculation Method",rules:[{required:!0}],children:(0,h.jsx)(l.A,{children:t.map((e=>(0,h.jsx)(f,{value:e.id,children:e.name},e.id)))})}),(0,h.jsx)(d.A.Item,{name:"renewal_period_id",label:"Renewal Period",rules:[{required:!0}],children:(0,h.jsx)(l.A,{children:u.map((e=>(0,h.jsx)(f,{value:e.id,children:e.name},e.id)))})}),(0,h.jsx)(d.A.Item,{name:"is_paid",label:"Is Paid",valuePropName:"checked",children:(0,h.jsx)(b.A,{})}),(0,h.jsx)(d.A.Item,{name:"is_event_based",label:"Event Based",valuePropName:"checked",children:(0,h.jsx)(b.A,{})}),(0,h.jsx)(d.A.Item,{name:"requires_approval",label:"Requires Approval",valuePropName:"checked",children:(0,h.jsx)(b.A,{})}),(0,h.jsx)(d.A.Item,{name:"max_days",label:"Max Days",children:(0,h.jsx)(x.A,{min:0})}),(0,h.jsx)(d.A.Item,{name:"description",label:"Description",children:(0,h.jsx)(w,{rows:4})}),(0,h.jsx)(d.A.Item,{children:(0,h.jsx)(m.Ay,{type:"primary",htmlType:"submit",children:"Add Leave Type"})})]}),se=()=>(0,h.jsxs)(d.A,{form:C,layout:"vertical",onFinish:X,children:[(0,h.jsx)(d.A.Item,{name:"leave_type_id",label:"Leave Type",rules:[{required:!0}],children:(0,h.jsx)(l.A,{children:e.map((e=>(0,h.jsx)(f,{value:e.id,children:e.name},e.id)))})}),(0,h.jsx)(d.A.Item,{name:"condition_type_id",label:"Condition Type",rules:[{required:!0}],children:(0,h.jsx)(l.A,{children:A.map((e=>(0,h.jsx)(f,{value:e.id,children:e.name},e.id)))})}),(0,h.jsx)(d.A.Item,{name:"comparison_operator_id",label:"Operator",rules:[{required:!0}],children:(0,h.jsx)(l.A,{children:g.map((e=>(0,h.jsxs)(f,{value:e.id,children:[e.name," (",e.symbol,")"]},e.id)))})}),(0,h.jsx)(d.A.Item,{name:"required_value",label:"Required Value",rules:[{required:!0}],children:(0,h.jsx)(c.A,{})}),(0,h.jsx)(d.A.Item,{name:"error_message",label:"Error Message",children:(0,h.jsx)(w,{rows:2})}),(0,h.jsx)(d.A.Item,{children:(0,h.jsx)(m.Ay,{type:"primary",htmlType:"submit",children:"Add Condition"})})]}),oe=()=>(0,h.jsxs)(d.A,{form:K,layout:"vertical",onFinish:te,children:[(0,h.jsx)(d.A.Item,{name:"code",label:"Kod",rules:[{required:!0}],children:(0,h.jsx)(c.A,{})}),(0,h.jsx)(d.A.Item,{name:"name",label:"Ad",rules:[{required:!0}],children:(0,h.jsx)(c.A,{})}),(0,h.jsx)(d.A.Item,{name:"symbol",label:"Sembol",rules:[{required:!0}],children:(0,h.jsx)(c.A,{})}),(0,h.jsx)(d.A.Item,{name:"description",label:"A\xe7\u0131klama",children:(0,h.jsx)(w,{rows:4})}),(0,h.jsx)(d.A.Item,{children:(0,h.jsx)(m.Ay,{type:"primary",htmlType:"submit",children:"Operat\xf6r Ekle"})})]}),de=()=>(0,h.jsxs)(d.A,{form:D,layout:"vertical",onFinish:re,children:[(0,h.jsx)(d.A.Item,{name:"code",label:"Code",rules:[{required:!0}],children:(0,h.jsx)(c.A,{})}),(0,h.jsx)(d.A.Item,{name:"name",label:"Ad",rules:[{required:!0}],children:(0,h.jsx)(c.A,{})}),(0,h.jsx)(d.A.Item,{name:"renewal_type",label:"Yenileme T\xfcr\xfc",rules:[{required:!0}],children:(0,h.jsx)(c.A,{})}),(0,h.jsx)(d.A.Item,{name:"renewal_month",label:"Yenileme Ay\u0131",rules:[{required:!0}],children:(0,h.jsx)(x.A,{min:1,max:12,placeholder:"1-12 aras\u0131 ay"})}),(0,h.jsx)(d.A.Item,{name:"renewal_day",label:"Yenileme G\xfcn\xfc",rules:[{required:!0}],children:(0,h.jsx)(x.A,{min:1,max:31,placeholder:"1-31 aras\u0131 g\xfcn"})}),(0,h.jsx)(d.A.Item,{name:"description",label:"A\xe7\u0131klama",children:(0,h.jsx)(c.A.TextArea,{rows:3})}),(0,h.jsx)(d.A.Item,{children:(0,h.jsx)(m.Ay,{type:"primary",htmlType:"submit",children:"Yenileme Periyodu Ekle"})})]}),ce=()=>(0,h.jsxs)(d.A,{form:z,layout:"vertical",onFinish:ae,children:[(0,h.jsx)(d.A.Item,{name:"code",label:"Ko\u015ful Kodu",rules:[{required:!0}],children:(0,h.jsx)(c.A,{})}),(0,h.jsx)(d.A.Item,{name:"name",label:"Ko\u015ful T\xfcr\xfc Ad\u0131",rules:[{required:!0}],children:(0,h.jsx)(c.A,{})}),(0,h.jsx)(d.A.Item,{name:"table_name",label:"Tablo Ad\u0131",rules:[{required:!0}],children:(0,h.jsx)(l.A,{onChange:ee,placeholder:"Tablo se\xe7in",children:q.map((e=>(0,h.jsx)(f,{value:e.id,children:e.display_name||e.table_name},e.id)))})}),(0,h.jsx)(d.A.Item,{name:"column_name",label:"S\xfctun Ad\u0131",rules:[{required:!0}],children:(0,h.jsx)(l.A,{placeholder:"S\xfctun se\xe7in",children:N.map((e=>(0,h.jsx)(f,{value:e.column_name,children:e.display_name||e.column_name},e.id)))})}),(0,h.jsx)(d.A.Item,{name:"data_type",label:"Veri Tipi",rules:[{required:!0}],children:(0,h.jsxs)(l.A,{children:[(0,h.jsx)(f,{value:"STRING",children:"String"}),(0,h.jsx)(f,{value:"NUMBER",children:"Number"}),(0,h.jsx)(f,{value:"DATE",children:"Date"}),(0,h.jsx)(f,{value:"BOOLEAN",children:"Boolean"})]})}),(0,h.jsx)(d.A.Item,{name:"possible_values",label:"Olas\u0131 De\u011ferler (Virg\xfclle ay\u0131r\u0131n)",children:(0,h.jsx)(c.A.TextArea,{placeholder:"\xd6rne\u011fin: MALE, FEMALE"})}),(0,h.jsx)(d.A.Item,{name:"description",label:"A\xe7\u0131klama",children:(0,h.jsx)(w,{rows:4})}),(0,h.jsx)(d.A.Item,{name:"is_active",valuePropName:"checked",children:(0,h.jsx)(_.A,{children:"Aktif mi?"})}),(0,h.jsx)(d.A.Item,{children:(0,h.jsx)(m.Ay,{type:"primary",htmlType:"submit",children:"Ko\u015ful T\xfcr\xfc Ekle"})})]}),me=()=>(0,h.jsxs)(d.A,{form:Y,layout:"vertical",onFinish:Z,children:[(0,h.jsx)(d.A.Item,{name:"leave_type_id",label:"\u0130zin T\xfcr\xfc",rules:[{required:!0}],children:(0,h.jsx)(l.A,{children:e.map((e=>(0,h.jsx)(f,{value:e.id,children:e.name},e.id)))})}),(0,h.jsx)(d.A.Item,{name:"years_of_service",label:"K\u0131dem Y\u0131l\u0131",rules:[{required:!0}],children:(0,h.jsx)(x.A,{min:0})}),(0,h.jsx)(d.A.Item,{name:"days_entitled",label:"Hak Edilen G\xfcn",rules:[{required:!0}],children:(0,h.jsx)(x.A,{min:1})}),(0,h.jsx)(d.A.Item,{name:"is_carried_forward",label:"Devir Edilebilir",valuePropName:"checked",children:(0,h.jsx)(_.A,{})}),(0,h.jsx)(d.A.Item,{name:"max_carryover_days",label:"Maksimum Devir G\xfcn Say\u0131s\u0131",children:(0,h.jsx)(x.A,{min:0,placeholder:"Devir g\xfcn\xfc limiti"})}),(0,h.jsx)(d.A.Item,{name:"effective_from",label:"Ge\xe7erli Ba\u015flang\u0131\xe7 Tarihi",rules:[{required:!0}],children:(0,h.jsx)(I.A,{})}),(0,h.jsx)(d.A.Item,{name:"effective_to",label:"Ge\xe7erli Biti\u015f Tarihi",children:(0,h.jsx)(I.A,{})}),(0,h.jsx)(d.A.Item,{children:(0,h.jsx)(m.Ay,{type:"primary",htmlType:"submit",children:"Politika Ekle"})})]}),ye=[{key:"1",label:"Leave Types",children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ie,{}),(0,h.jsx)(y.A,{columns:le,dataSource:e,rowKey:"id"})]})},{key:"2",label:"Leave Conditions",children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(se,{}),(0,h.jsx)(y.A,{columns:[{title:"Leave Type",dataIndex:"leave_type_name",key:"leave_type_name"},{title:"Condition Type",dataIndex:"condition_type_name",key:"condition_type_name"},{title:"Operator",dataIndex:"operator_name",key:"operator_name"},{title:"Required Value",dataIndex:"required_value",key:"required_value"},{title:"Error Message",dataIndex:"error_message",key:"error_message"}],dataSource:k,rowKey:"id"})]})},{key:"3",label:"\u0130zin Politikalar\u0131",children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(me,{}),(0,h.jsx)(y.A,{columns:[{title:"Leave Type",dataIndex:"leave_type_name",key:"leave_type_name"},{title:"Years of Service",dataIndex:"years_of_service",key:"years_of_service"},{title:"Days Entitled",dataIndex:"days_entitled",key:"days_entitled"},{title:"Carry Forward Limit",dataIndex:"carry_forward_limit",key:"carry_forward_limit"}],dataSource:F,rowKey:"id"})]})},{key:"4",label:"Ko\u015ful T\xfcrleri",children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ce,{}),(0,h.jsx)(y.A,{columns:ne,dataSource:A,rowKey:"id"})]})},{key:"5",label:"Comparison Operators",children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(oe,{}),(0,h.jsx)(y.A,{columns:[{title:"Kod",dataIndex:"code",key:"code"},{title:"Ad",dataIndex:"name",key:"name"},{title:"Sembol",dataIndex:"symbol",key:"symbol"},{title:"A\xe7\u0131klama",dataIndex:"description",key:"description"}],dataSource:g,rowKey:"id"})]})},{key:"6",label:"Yenileme Periyotlar\u0131",children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(de,{}),(0,h.jsx)(y.A,{columns:[{title:"Kod",dataIndex:"code",key:"code"},{title:"Ad",dataIndex:"name",key:"name"},{title:"Yenileme Ay\u0131",dataIndex:"renewal_month",key:"renewal_month"},{title:"Yenileme G\xfcn\xfc",dataIndex:"renewal_day",key:"renewal_day"},{title:"Yenileme T\xfcr\xfc",dataIndex:"renewal_type",key:"renewal_type"},{title:"A\xe7\u0131klama",dataIndex:"description",key:"description"}],dataSource:u,rowKey:"id"})]})}];return(0,h.jsx)(i.A,{items:ye})};var F=t(6823),T=t(1598);const{Option:E}=l.A,C=()=>{const[e,a]=(0,r.useState)([]),[t,i]=(0,r.useState)([]),[d,c]=(0,r.useState)(!1),[u,p]=(0,r.useState)(null),[A,x]=(0,r.useState)([]),[j,g]=(0,r.useState)(null),[v,k]=(0,r.useState)(!1);(0,r.useEffect)((()=>{b(),_()}),[]);const b=async()=>{try{const e=await o.A.get("http://localhost:5001/api/invalid-entries");console.log("Invalid entries response:",e.data),i(e.data)}catch(e){console.error("Error fetching invalid entries:",e),n.Ay.error("Hatal\u0131 kay\u0131tlar al\u0131n\u0131rken bir sorun olu\u015ftu.")}},_=async()=>{try{const e=await o.A.get("http://localhost:5001/api/personnel");e.data&&e.data.length>0?x(e.data):n.Ay.warning("Personel listesi bo\u015f.")}catch(e){console.error("Error fetching personnel list:",e),n.Ay.error("Personel listesi al\u0131n\u0131rken bir sorun olu\u015ftu.")}},I=[{title:"Kart No",dataIndex:"card_number",key:"card_number"},{title:"Giri\u015f Tarihi",dataIndex:"entry_date",key:"entry_date"},{title:"Giri\u015f Saati",dataIndex:"entry_time",key:"entry_time"},{title:"\xc7\u0131k\u0131\u015f Tarihi",dataIndex:"exit_date",key:"exit_date"},{title:"\xc7\u0131k\u0131\u015f Saati",dataIndex:"exit_time",key:"exit_time"},{title:"Hata Mesaj\u0131",dataIndex:"error_message",key:"error_message"},{title:"\u0130\u015flem",key:"action",render:(e,a)=>(0,h.jsx)(m.Ay,{type:"link",onClick:()=>(e=>{p(e),c(!0)})(a),children:"Personel E\u015fle\u015ftir"})}];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(F.A,{beforeUpload:e=>(console.log("Selected file:",e.name),e.name.endsWith(".xlsx")?(a([e]),!1):(n.Ay.error("Sadece .xlsx dosyalar\u0131 y\xfcklenebilir!"),!1)),fileList:e,onRemove:()=>{console.log("Removing file"),a([])},accept:".xlsx",children:(0,h.jsx)(m.Ay,{icon:(0,h.jsx)(T.A,{}),children:"Dosya Se\xe7"})}),(0,h.jsx)(m.Ay,{type:"primary",onClick:async()=>{if(0===e.length)return void n.Ay.error("L\xfctfen bir dosya se\xe7in");k(!0);const t=new FormData,r=e[0];console.log("Selected file details:",{name:r.name,type:r.type,size:r.size}),t.append("file",r);for(let e of t.entries())console.log("FormData content:",e[0],e[1]);try{console.log("Sending upload request...");const e=await o.A.post("http://localhost:5001/api/upload-attendance",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{const a=Math.round(100*e.loaded/e.total);console.log("Upload progress:",a+"%")}});var l;if(console.log("Upload response:",e),200===e.status)e.data.invalidEntriesCount>0?(n.Ay.warning(`${e.data.invalidEntriesCount} kart numaras\u0131 e\u015fle\u015ftirilemedi.`),await b()):n.Ay.success("Dosya ba\u015far\u0131yla y\xfcklendi ve i\u015flendi."),(null===(l=e.data.skippedEntries)||void 0===l?void 0:l.length)>0&&n.Ay.info(`${e.data.skippedEntries.length} kay\u0131t zaten mevcut oldu\u011fu i\xe7in atland\u0131.`),a([])}catch(i){console.error("Upload error details:",i),i.response?(console.error("Server error response:",i.response.data),n.Ay.error(i.response.data.message||"Dosya y\xfcklenirken bir hata olu\u015ftu")):i.request?(console.error("No response from server:",i.request),n.Ay.error("Sunucudan yan\u0131t al\u0131namad\u0131. L\xfctfen ba\u011flant\u0131n\u0131z\u0131 kontrol edin.")):(console.error("Request error:",i.message),n.Ay.error("Dosya y\xfckleme iste\u011fi olu\u015fturulamad\u0131."))}finally{k(!1)}},disabled:0===e.length||v,loading:v,style:{marginTop:16},children:v?"Y\xfckleniyor...":"Yoklamay\u0131 Y\xfckle ve \u0130\xe7e Aktar"}),t.length>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h3",{children:"Hatal\u0131 Kay\u0131tlar"}),(0,h.jsx)(y.A,{dataSource:t,columns:I,rowKey:"id"})]}),(0,h.jsx)(s.A,{title:"Personel E\u015fle\u015ftirme",open:d,onOk:async()=>{if(j)try{const e=await o.A.post("http://localhost:5001/api/update-attendance",{personnelId:parseInt(j),cardNumber:u.card_number,entryDate:u.entry_date,entryTime:u.entry_time,exitDate:u.exit_date,exitTime:u.exit_time});n.Ay.success(e.data),b(),c(!1),g(null)}catch(e){console.error("Error matching personnel:",e),n.Ay.error("Personel e\u015fle\u015ftirme s\u0131ras\u0131nda bir hata olu\u015ftu.")}else n.Ay.error("L\xfctfen bir personel se\xe7in.")},onCancel:()=>{c(!1),g(null)},children:u?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("p",{children:["Kart No: ",u.card_number]}),(0,h.jsx)(l.A,{style:{width:"100%"},placeholder:"Personel Se\xe7",onChange:e=>g(e),value:j,children:A.map((e=>(0,h.jsxs)(E,{value:e.id,children:[e.first_name," ",e.last_name]},e.id)))}),(0,h.jsx)("p",{children:"Bu kart numaras\u0131n\u0131 se\xe7ilen personel ile e\u015fle\u015ftirmek istedi\u011finizden emin misiniz?"})]}):(0,h.jsx)("p",{children:"Se\xe7ili bir kay\u0131t bulunamad\u0131."})})]})};var Y=t(9051),z=t.n(Y);const K=()=>{const[e,a]=(0,r.useState)([]),[t]=d.A.useForm(),l=async()=>{try{const e=await o.A.get("http://localhost:5001/api/public-holidays");console.log("Raw data from backend:",e.data);const t=e.data.map((e=>({...e,holiday_date:z()(e.holiday_date).format("YYYY-MM-DD")})));console.log("Formatted holidays:",t),a(t)}catch(e){console.error("Error loading holidays:",e),n.Ay.error("Tatiller y\xfcklenemedi")}};(0,r.useEffect)((()=>{l()}),[]);const i=[{title:"Tatil Ad\u0131",dataIndex:"holiday_name",key:"holiday_name"},{title:"Tarih",dataIndex:"holiday_date",key:"holiday_date",render:e=>z()(e).format("YYYY-MM-DD")}];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(d.A,{form:t,layout:"vertical",onFinish:async e=>{try{const a=e.start_date,r=e.end_date;if(!a||!r)return void n.Ay.error("Ba\u015flang\u0131\xe7 ve biti\u015f tarihlerini se\xe7melisiniz.");const i=a.format("YYYY-MM-DD"),s=r.format("YYYY-MM-DD"),d=[];let c=z()(i);const m=z()(s);for(;c.isSameOrBefore(m);)d.push({holiday_name:e.name,holiday_date:c.format("YYYY-MM-DD")}),c=c.add(1,"days");console.log("Holidays to be sent:",d),await o.A.post("http://localhost:5001/api/public-holidays",d),n.Ay.success("Tatil ba\u015far\u0131yla eklendi"),t.resetFields(),l()}catch(a){console.error("Error:",a),n.Ay.error("Tatil eklenirken bir hata olu\u015ftu")}},children:[(0,h.jsx)(d.A.Item,{name:"name",label:"Tatil Ad\u0131",rules:[{required:!0,message:"L\xfctfen tatil ad\u0131n\u0131 girin"}],children:(0,h.jsx)(c.A,{placeholder:"Tatil ad\u0131n\u0131 girin"})}),(0,h.jsx)(d.A.Item,{name:"start_date",label:"Ba\u015flang\u0131\xe7 Tarihi",rules:[{required:!0,message:"L\xfctfen ba\u015flang\u0131\xe7 tarihi se\xe7in"}],children:(0,h.jsx)(I.A,{format:"YYYY-MM-DD"})}),(0,h.jsx)(d.A.Item,{name:"end_date",label:"Biti\u015f Tarihi",rules:[{required:!0,message:"L\xfctfen biti\u015f tarihi se\xe7in"}],children:(0,h.jsx)(I.A,{format:"YYYY-MM-DD"})}),(0,h.jsx)(d.A.Item,{children:(0,h.jsx)(m.Ay,{type:"primary",htmlType:"submit",children:"Tatil Ekle"})})]}),(0,h.jsx)(y.A,{dataSource:e,columns:i,rowKey:e=>`${e.holiday_name}-${e.holiday_date}`})]})};var D=t(3072);const{Option:q}=l.A,P=e=>{let{users:a,fetchUsers:t,personnelList:i}=e;const[s,d]=(0,r.useState)(null),[y,u]=(0,r.useState)(""),[p,A]=(0,r.useState)(null),[x,j]=(0,r.useState)(""),[g,v]=(0,r.useState)("");return(0,h.jsxs)("div",{children:[(0,h.jsx)(D.A,{orientation:"left",children:"Kullan\u0131c\u0131 \u015eifresi G\xfcncelle"}),(0,h.jsx)(l.A,{style:{width:"100%",marginBottom:"1rem"},placeholder:"Kullan\u0131c\u0131 Se\xe7",onChange:e=>d(e),value:s,children:a.map((e=>(0,h.jsx)(q,{value:e.id,children:e.username},e.id)))}),(0,h.jsx)(c.A.Password,{style:{width:"100%",marginBottom:"1rem"},placeholder:"Yeni \u015eifre",onChange:e=>u(e.target.value),value:y}),(0,h.jsx)(m.Ay,{type:"primary",onClick:async()=>{if(s&&y)try{200===(await o.A.post("http://localhost:5001/api/users/update-password",{userId:s,password:y})).status&&(n.Ay.success("\u015eifre ba\u015far\u0131yla g\xfcncellendi!"),d(null),u(""),t())}catch(e){n.Ay.error("\u015eifre g\xfcncellenirken bir hata olu\u015ftu")}else n.Ay.warning("Kullan\u0131c\u0131y\u0131 ve yeni \u015fifreyi girin")},children:"\u015eifreyi G\xfcncelle"}),(0,h.jsx)(D.A,{orientation:"left",children:"Yeni Kullan\u0131c\u0131 Ekle"}),(0,h.jsx)(l.A,{style:{width:"100%",marginBottom:"1rem"},placeholder:"Personel Se\xe7",onChange:e=>A(e),value:p,children:i.map((e=>(0,h.jsxs)(q,{value:e.id,children:[e.first_name," ",e.last_name]},e.id)))}),(0,h.jsx)(c.A,{style:{width:"100%",marginBottom:"1rem"},placeholder:"Kullan\u0131c\u0131 Ad\u0131",onChange:e=>j(e.target.value),value:x}),(0,h.jsx)(c.A.Password,{style:{width:"100%",marginBottom:"1rem"},placeholder:"\u015eifre",onChange:e=>v(e.target.value),value:g}),(0,h.jsx)(m.Ay,{type:"primary",onClick:async()=>{if(p&&x&&g)try{201===(await o.A.post("http://localhost:5001/api/users/add",{personnelId:p,username:x,password:g})).status&&(n.Ay.success("Yeni kullan\u0131c\u0131 ba\u015far\u0131yla eklendi!"),A(null),j(""),v(""),t())}catch(e){n.Ay.error("Kullan\u0131c\u0131 eklenirken bir hata olu\u015ftu")}else n.Ay.warning("Personel, kullan\u0131c\u0131 ad\u0131 ve \u015fifre bilgilerini eksiksiz doldurun")},children:"Kullan\u0131c\u0131 Ekle"})]})};var N=t(5621),B=t(5398);const{Option:M}=l.A,R=()=>{const[e,a]=(0,r.useState)([]),[t,s]=(0,r.useState)([]),[d,u]=(0,r.useState)(null),[p,x]=(0,r.useState)(""),[j,g]=(0,r.useState)(null),[v,k]=(0,r.useState)(!1),[b,_]=(0,r.useState)([]),[I,f]=(0,r.useState)([]),[w,S]=(0,r.useState)([]);(0,r.useEffect)((()=>{F(),T(),E()}),[]),(0,r.useEffect)((()=>{d&&C()}),[d,t]);const F=async()=>{k(!0);const e=localStorage.getItem("token");try{const t=await o.A.get("http://localhost:5001/api/roles",{headers:{Authorization:`Bearer ${e}`}});a(t.data)}catch(t){console.error("Roller al\u0131n\u0131rken hata:",t),n.Ay.error("Roller al\u0131namad\u0131")}finally{k(!1)}},T=async()=>{const e=localStorage.getItem("token");try{const a=await o.A.get("http://localhost:5001/api/permissions",{headers:{Authorization:`Bearer ${e}`}});s(a.data)}catch(a){console.error("\u0130zinler al\u0131n\u0131rken hata:",a),n.Ay.error("\u0130zinler al\u0131namad\u0131")}},E=async()=>{const e=localStorage.getItem("token");try{const a=await o.A.get("http://localhost:5001/api/users/with-roles",{headers:{Authorization:`Bearer ${e}`}});S(a.data)}catch(a){console.error("Kullan\u0131c\u0131lar al\u0131n\u0131rken hata:",a),n.Ay.error("Kullan\u0131c\u0131lar al\u0131namad\u0131")}},C=()=>{const a=e.find((e=>e.id===d));if(a){const e=a.permissions||[];_(e);const r=t.filter((a=>!e.some((e=>e.id===a.id))));f(r)}},Y=[{title:"Rol Ad\u0131",dataIndex:"name",key:"name"},{title:"Mevcut \u0130zinler",dataIndex:"permissions",key:"permissions",render:e=>(0,h.jsx)(A.A,{wrap:!0,children:e&&e.filter((e=>e)).map((e=>(0,h.jsx)(N.A,{color:"blue",children:e.name},e.id)))})}],z=[{title:"Kullan\u0131c\u0131 Ad\u0131",dataIndex:"username",key:"username"},{title:"Ad Soyad",key:"fullName",render:e=>`${e.first_name||""} ${e.last_name||""}`},{title:"Mevcut Rol",dataIndex:"role_name",key:"role_name",render:e=>e?(0,h.jsx)(N.A,{color:"blue",children:e}):"-"},{title:"Rol Ata",key:"assign",render:a=>(0,h.jsx)(l.A,{style:{width:200},value:a.role_id,onChange:e=>(async(e,a)=>{const t=localStorage.getItem("token");try{await o.A.post(`http://localhost:5001/api/users/${e}/role`,{roleId:a},{headers:{Authorization:`Bearer ${t}`}}),n.Ay.success("Rol ba\u015far\u0131yla atand\u0131"),E()}catch(r){console.error("Rol atan\u0131rken hata:",r),n.Ay.error("Rol atanamad\u0131")}})(a.id,e),placeholder:"Rol se\xe7",children:e.map((e=>(0,h.jsx)(M,{value:e.id,children:e.name},e.id)))})}],K=[{key:"1",label:"Roller",children:(0,h.jsxs)(A.A,{direction:"vertical",style:{width:"100%",marginBottom:16},children:[(0,h.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:16},children:[(0,h.jsx)(c.A,{placeholder:"Yeni Rol Ad\u0131",value:p,onChange:e=>x(e.target.value),style:{width:200}}),(0,h.jsx)(m.Ay,{type:"primary",onClick:async()=>{if(!p.trim())return void n.Ay.warning("Rol ismi bo\u015f olamaz");const e=localStorage.getItem("token");try{await o.A.post("http://localhost:5001/api/roles",{name:p},{headers:{Authorization:`Bearer ${e}`}}),n.Ay.success("Rol ba\u015far\u0131yla eklendi"),x(""),F()}catch(a){console.error("Rol eklenirken hata:",a),n.Ay.error("Rol eklenemedi")}},disabled:!p.trim(),children:"Rol Ekle"})]}),(0,h.jsx)(y.A,{loading:v,dataSource:e,columns:Y,rowKey:"id"})]})},{key:"2",label:"\u0130zin Atama",children:(0,h.jsxs)(A.A,{direction:"vertical",style:{width:"100%"},children:[(0,h.jsx)("div",{style:{marginBottom:16},children:(0,h.jsx)(l.A,{placeholder:"Rol Se\xe7in",style:{width:200,marginBottom:8},value:d,onChange:e=>{u(e),g(null)},children:e.map((e=>(0,h.jsx)(M,{value:e.id,children:e.name},e.id)))})}),d&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{style:{marginBottom:16},children:[(0,h.jsx)("h4",{children:"Mevcut \u0130zinler:"}),(0,h.jsx)(B.A,{dataSource:b,renderItem:e=>(0,h.jsx)(B.A.Item,{children:(0,h.jsx)(N.A,{color:"blue",children:e.name})}),locale:{emptyText:"Bu role hen\xfcz izin atanmam\u0131\u015f"}})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h4",{children:"Yeni \u0130zin Ekle:"}),(0,h.jsxs)(A.A,{children:[(0,h.jsx)(l.A,{placeholder:"\u0130zin Se\xe7in",style:{width:200},value:j,onChange:g,children:I.map((e=>(0,h.jsx)(M,{value:e.id,children:e.name},e.id)))}),(0,h.jsx)(m.Ay,{type:"primary",onClick:async()=>{if(!d||!j)return void n.Ay.warning("L\xfctfen rol ve izin se\xe7in");const e=localStorage.getItem("token");try{await o.A.post(`http://localhost:5001/api/roles/${d}/permissions`,{permissionId:j},{headers:{Authorization:`Bearer ${e}`}}),n.Ay.success("\u0130zin ba\u015far\u0131yla role eklendi"),await F(),C(),g(null)}catch(a){console.error("\u0130zin eklenirken hata:",a),n.Ay.error("\u0130zin eklenemedi")}},disabled:!j,children:"\u0130zin Ekle"})]})]})]})]})},{key:"3",label:"Kullan\u0131c\u0131 Rolleri",children:(0,h.jsx)(y.A,{dataSource:w,columns:z,rowKey:"id"})}];return(0,h.jsx)("div",{className:"role-permissions-container",children:(0,h.jsx)(i.A,{defaultActiveKey:"1",items:K})})},{Option:L}=l.A,$=()=>{const[e,a]=(0,r.useState)([]),[t,d]=(0,r.useState)([]),[c,m]=(0,r.useState)([]),[y,A]=(0,r.useState)([]),[x,j]=(0,r.useState)([]),[g,v]=(0,r.useState)(!1),[b,_]=(0,r.useState)(null),[I,f]=(0,r.useState)(null),[w,F]=(0,r.useState)([]),[T,E]=(0,r.useState)([]),[Y,z]=(0,r.useState)([]),[D,q]=(0,r.useState)([]),N=()=>({headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});(0,r.useEffect)((()=>{B(),M(),$(),O(),H(),V(),G()}),[]),(0,r.useEffect)((()=>{w.length>0&&U()}),[w]);const B=async()=>{try{const e=await o.A.get("http://localhost:5001/api/departments");a(e.data)}catch(e){n.Ay.error("Failed to load departments")}},M=async()=>{try{const e=await o.A.get("http://localhost:5001/api/titles");d(e.data)}catch(e){n.Ay.error("Failed to load titles")}},$=async()=>{try{const e=await o.A.get("http://localhost:5001/api/contents");m(e.data)}catch(e){n.Ay.error("Failed to load content types")}},O=async()=>{try{const e=await o.A.get("http://localhost:5001/api/personnel");j(e.data)}catch(e){n.Ay.error("Failed to load personnel list")}},G=async()=>{try{const e=await o.A.get("http://localhost:5001/api/leave-management/new-leave-types",N());F(e.data)}catch(e){n.Ay.error("Failed to load leave types")}},U=async()=>{try{const e=(await o.A.get("http://localhost:5001/api/leave-management/leave-policies",N())).data.map((e=>{const a=w.find((a=>a.id===e.leave_type_id));return{...e,leave_type_name:a?a.name:"Unknown"}}));E(e)}catch(e){n.Ay.error("Failed to load leave policies")}},H=async()=>{try{const e=await o.A.get("http://localhost:5001/api/public-holidays");z(e.data)}catch(e){n.Ay.error("Failed to load public holidays")}},V=async()=>{try{const e=await o.A.get("http://localhost:5001/api/users");q(e.data)}catch(e){n.Ay.error("Failed to load users")}},J=[{key:"1",label:"Departments",children:(0,h.jsx)(u,{departments:e,fetchDepartments:B})},{key:"2",label:"Titles",children:(0,h.jsx)(p,{titles:t,fetchTitles:M})},{key:"3",label:"Content Types",children:(0,h.jsx)(k,{contentTypes:c,fetchContentTypes:$})},{key:"4",label:"Leave Settings",children:(0,h.jsx)(S,{leaveTypes:w,leavePolicies:T,fetchLeaveTypes:G,fetchLeavePolicies:U})},{key:"5",label:"Import Attendance",children:(0,h.jsx)(C,{invalidEntries:y,setInvalidEntries:A,handleRowClick:e=>{f(e),v(!0)}})},{key:"6",label:"Public Holidays",children:(0,h.jsx)(K,{fetchHolidays:H})},{key:"7",label:"Users",children:(0,h.jsx)(P,{users:D,fetchUsers:V,personnelList:x})},{key:"8",label:"Role & Permissions",children:(0,h.jsx)(R,{})}];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.A,{items:J,defaultActiveKey:"1"}),(0,h.jsx)(s.A,{title:"Personel Se\xe7",open:g,onCancel:()=>v(!1),onOk:async()=>{if(b)try{if(200===(await o.A.post("http://localhost:5001/api/update-attendance",{personnelId:b,cardNumber:I["Kart No"]})).status){n.Ay.success("Personel ba\u015far\u0131yla e\u015fle\u015ftirildi!");const e=y.filter((e=>e["Kart No"]!==I["Kart No"]));A(e),v(!1)}}catch(e){n.Ay.error("G\xfcncelleme s\u0131ras\u0131nda bir hata olu\u015ftu")}else n.Ay.warning("L\xfctfen bir personel se\xe7in.")},children:(0,h.jsx)(l.A,{style:{width:"100%"},placeholder:"Personel Se\xe7",onChange:e=>_(e),value:b,children:x.map((e=>(0,h.jsxs)(L,{value:e.id,children:[e.first_name," ",e.last_name]},e.id)))})})]})}}}]);