"use strict";(self.webpackChunkmuse_dashboard=self.webpackChunkmuse_dashboard||[]).push([[805],{7805:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var n=a(9950),r=a(8429),l=a(2460),i=a(6025),o=a(9654),s=a(5621),c=a(6004),d=a(7465),u=a(7094),m=a(1988),h=a(5355),p=a(6550),g=a(2056),x=a(8902),A=a(6092),y=a(974),j=a(8114),v=a(3148),_=a(8750),f=a(9251),T=a(9246),k=a(9051),b=a.n(k),D=a(127),S=a(4414);const{RangePicker:w}=l.A,{Option:C}=i.A,Y=()=>{const e=(0,r.Zp)(),[t,a]=(0,n.useState)([]),[l,k]=(0,n.useState)(!1),[Y,R]=(0,n.useState)(!1),[E,M]=(0,n.useState)({status:"all",dateRange:null,search:"",type:"all"}),[I,$]=(0,n.useState)([]),[z,H]=(0,n.useState)(!1),[O,P]=(0,n.useState)({dateRange:null,search:"",documentType:"all"}),L=T.A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5001",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}),B=async()=>{k(!0);try{const e=[];"all"!==E.status&&e.push(`status=${E.status}`),E.dateRange&&(e.push(`startDate=${E.dateRange[0].format("YYYY-MM-DD")}`),e.push(`endDate=${E.dateRange[1].format("YYYY-MM-DD")}`)),E.search&&e.push(`search=${E.search}`),"all"!==E.type&&e.push(`type=${E.type}`);const t=e.length?`?${e.join("&")}`:"",n=await L.get(`/api/meetings${t}`);a(n.data)}catch(e){console.error("Error fetching meetings:",e),o.Ay.error("Toplant\u0131lar y\xfcklenirken bir hata olu\u015ftu")}finally{k(!1)}},F=async()=>{H(!0);try{const e={};O.dateRange&&(e.startDate=O.dateRange[0].format("YYYY-MM-DD"),e.endDate=O.dateRange[1].format("YYYY-MM-DD")),O.search&&(e.search=O.search),"all"!==O.documentType&&(e.documentType=O.documentType),console.log("Fetching documents with params:",e);const t=await L.get("/api/meetings/documents",{params:e});console.log("API response data:",t.data),$(t.data)}catch(e){console.error("Error fetching documents:",e),o.Ay.error("Dok\xfcmanlar y\xfcklenirken bir hata olu\u015ftu")}finally{H(!1)}};(0,n.useEffect)((()=>{B()}),[E]),(0,n.useEffect)((()=>{F()}),[O]),(0,n.useEffect)((()=>{B(),F()}),[]);const K=[{title:"Ba\u015fl\u0131k",dataIndex:"title",key:"title",render:(t,a)=>(0,S.jsx)("a",{onClick:()=>e(`/meetings/${a.id}`),children:t})},{title:"T\xfcr",dataIndex:"meeting_type",key:"meeting_type",render:e=>{var t,a;const n={regular:{color:"blue",text:"Rutin"},emergency:{color:"red",text:"Acil"},board:{color:"purple",text:"Y\xf6netim"}};return(0,S.jsx)(s.A,{color:null===(t=n[e])||void 0===t?void 0:t.color,children:(null===(a=n[e])||void 0===a?void 0:a.text)||e})},sorter:(e,t)=>e.meeting_type.localeCompare(t.meeting_type)},{title:"Tarih",dataIndex:"start_time",key:"start_time",render:(e,t)=>(0,S.jsxs)(c.A,{direction:"vertical",size:0,children:[(0,S.jsx)("div",{children:b()(e).format("DD.MM.YYYY")}),(0,S.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:`${b()(e).format("HH:mm")} - ${b()(t.end_time).format("HH:mm")}`})]}),sorter:(e,t)=>b()(e.start_time).unix()-b()(t.start_time).unix()},{title:"Durum",dataIndex:"status",key:"status",render:e=>{var t,a;const n={planned:{color:"blue",text:"Planland\u0131"},in_progress:{color:"green",text:"Devam Ediyor"},completed:{color:"purple",text:"Tamamland\u0131"},cancelled:{color:"red",text:"\u0130ptal Edildi"}};return(0,S.jsx)(s.A,{color:null===(t=n[e])||void 0===t?void 0:t.color,children:null===(a=n[e])||void 0===a?void 0:a.text})},sorter:(e,t)=>e.status.localeCompare(t.status)},{title:"Organizat\xf6r",dataIndex:"organizer_name",key:"organizer_name"},{title:"Kat\u0131l\u0131mc\u0131lar",key:"participants",render:(e,t)=>{var a;return(0,S.jsxs)(s.A,{icon:(0,S.jsx)(y.A,{}),children:[(null===(a=t.participants)||void 0===a?void 0:a.length)||0," Ki\u015fi"]})}}],U=[{title:"Toplant\u0131",dataIndex:"meeting_title",key:"meeting_title",render:(t,a)=>(0,S.jsx)("a",{onClick:()=>e(`/meetings/${a.meeting_id}`),children:t}),sorter:(e,t)=>e.meeting_title.localeCompare(t.meeting_title)},{title:"Dok\xfcman Tipi",dataIndex:"document_type",key:"document_type",render:e=>{var t,a;const n={agenda:{color:"blue",text:"G\xfcndem"},minutes:{color:"green",text:"Tutanak"}};return(0,S.jsx)(s.A,{color:null===(t=n[e])||void 0===t?void 0:t.color,children:null===(a=n[e])||void 0===a?void 0:a.text})},filters:[{text:"G\xfcndem",value:"agenda"},{text:"Tutanak",value:"minutes"}],onFilter:(e,t)=>t.document_type===e},{title:"Olu\u015fturma Tarihi",dataIndex:"created_at",key:"created_at",render:e=>b()(e).format("DD.MM.YYYY HH:mm"),sorter:(e,t)=>b()(e.created_at).unix()-b()(t.created_at).unix()},{title:"Olu\u015fturan",dataIndex:"created_by_name",key:"created_by_name",sorter:(e,t)=>e.created_by_name.localeCompare(t.created_by_name)},{title:"\u0130\u015flemler",key:"actions",render:(e,t)=>(0,S.jsx)(c.A,{children:(0,S.jsx)(d.Ay,{type:"primary",icon:(0,S.jsx)(j.A,{}),onClick:()=>(async(e,t)=>{try{const a=await L.get(`/api/meetings/documents/${e}/download`,{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([a.data])),r=document.createElement("a");r.href=n,r.setAttribute("download",t||"document.pdf"),document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(n)}catch(a){console.error("Error downloading document:",a),o.Ay.error("Dok\xfcman indirilirken bir hata olu\u015ftu")}})(t.id,t.file_name),children:"\u0130ndir"})})}],V=[{key:"meetings",label:"Toplant\u0131lar",children:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(u.A,{gutter:16,style:{marginBottom:16},children:[(0,S.jsx)(m.A,{span:8,children:(0,S.jsx)(h.A,{prefix:(0,S.jsx)(v.A,{}),placeholder:"Toplant\u0131 Ara...",value:E.search,onChange:e=>M((t=>({...t,search:e.target.value}))),allowClear:!0})}),(0,S.jsx)(m.A,{span:6,children:(0,S.jsxs)(i.A,{style:{width:"100%"},value:E.status,onChange:e=>M((t=>({...t,status:e}))),placeholder:"Durum Filtrele",children:[(0,S.jsx)(C,{value:"all",children:"T\xfcm Durumlar"}),(0,S.jsx)(C,{value:"planned",children:"Planland\u0131"}),(0,S.jsx)(C,{value:"in_progress",children:"Devam Ediyor"}),(0,S.jsx)(C,{value:"completed",children:"Tamamland\u0131"}),(0,S.jsx)(C,{value:"cancelled",children:"\u0130ptal Edildi"})]})}),(0,S.jsx)(m.A,{span:6,children:(0,S.jsx)(w,{style:{width:"100%"},value:E.dateRange,onChange:e=>M((t=>({...t,dateRange:e}))),placeholder:["Ba\u015flang\u0131\xe7","Biti\u015f"]})}),(0,S.jsx)(m.A,{span:4,children:(0,S.jsxs)(c.A,{children:[(0,S.jsx)(d.Ay,{type:"primary",icon:(0,S.jsx)(_.A,{}),onClick:()=>R(!0),children:"Yeni Toplant\u0131"}),(0,S.jsx)(d.Ay,{icon:(0,S.jsx)(f.A,{}),onClick:()=>M({status:"all",dateRange:null,search:"",type:"all"}),children:"S\u0131f\u0131rla"})]})})]}),(0,S.jsx)(p.A,{columns:K,dataSource:t,rowKey:"id",loading:l,pagination:{showSizeChanger:!0,showTotal:(e,t)=>`${t[0]}-${t[1]} / ${e} toplant\u0131`,defaultPageSize:10,pageSizeOptions:["10","20","50"]}})]})},{key:"documents",label:"Dok\xfcmanlar",children:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(u.A,{gutter:16,style:{marginBottom:16},children:[(0,S.jsx)(m.A,{span:8,children:(0,S.jsx)(h.A,{prefix:(0,S.jsx)(v.A,{}),placeholder:"Dok\xfcman Ara...",value:O.search,onChange:e=>P((t=>({...t,search:e.target.value}))),allowClear:!0})}),(0,S.jsx)(m.A,{span:6,children:(0,S.jsxs)(i.A,{style:{width:"100%"},value:O.documentType,onChange:e=>P((t=>({...t,documentType:e}))),placeholder:"Dok\xfcman Tipi Filtrele",children:[(0,S.jsx)(C,{value:"all",children:"T\xfcm Dok\xfcman Tipleri"}),(0,S.jsx)(C,{value:"agenda",children:"G\xfcndem"}),(0,S.jsx)(C,{value:"minutes",children:"Tutanak"})]})}),(0,S.jsx)(m.A,{span:6,children:(0,S.jsx)(w,{style:{width:"100%"},value:O.dateRange,onChange:e=>P((t=>({...t,dateRange:e}))),placeholder:["Ba\u015flang\u0131\xe7","Biti\u015f"]})}),(0,S.jsx)(m.A,{span:4,children:(0,S.jsx)(d.Ay,{icon:(0,S.jsx)(f.A,{}),onClick:()=>P({dateRange:null,search:"",documentType:"all"}),children:"S\u0131f\u0131rla"})})]}),(0,S.jsx)(p.A,{columns:U,dataSource:I,rowKey:"id",loading:z,pagination:{showSizeChanger:!0,showTotal:(e,t)=>`${t[0]}-${t[1]} / ${e} dok\xfcman`,defaultPageSize:10,pageSizeOptions:["10","20","50"]}})]})}];return(0,S.jsxs)("div",{children:[(0,S.jsx)(g.A,{children:(0,S.jsx)(x.A,{items:V})}),(0,S.jsx)(A.A,{title:"Yeni Toplant\u0131",open:Y,onCancel:()=>R(!1),footer:null,width:800,children:(0,S.jsx)(D.A,{onSuccess:()=>{R(!1),B(),o.Ay.success("Toplant\u0131 ba\u015far\u0131yla olu\u015fturuldu")}})})]})}},127:(e,t,a)=>{a.d(t,{A:()=>v});var n=a(9950),r=a(2460),l=a(5355),i=a(6025),o=a(3561),s=a(9654),c=a(6004),d=a(7465),u=a(1419),m=a(9246),h=a(9051),p=a.n(h),g=a(4414);const{RangePicker:x}=r.A,{TextArea:A}=l.A,{Option:y}=i.A,j=m.A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5001",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}),v=e=>{let{meeting:t,onSuccess:a}=e;const[r]=o.A.useForm(),[m,h]=(0,n.useState)(!1),[v,_]=(0,n.useState)([]);(0,n.useEffect)((()=>{var e;(f(),t)&&r.setFieldsValue({...t,date_range:[p()(t.start_time),p()(t.end_time)],participants:null===(e=t.participants)||void 0===e?void 0:e.map((e=>e.id))})}),[t,r]);const f=async()=>{try{const e=await j.get("/api/personnel");_(e.data)}catch(e){console.error("Error fetching personnel:",e),s.Ay.error("Personel listesi y\xfcklenirken bir hata olu\u015ftu")}};return(0,g.jsxs)(o.A,{form:r,layout:"vertical",onFinish:async e=>{h(!0);try{const n={title:e.title,description:e.description,meeting_type:e.meeting_type,start_time:e.date_range[0].format("YYYY-MM-DD HH:mm:ss"),end_time:e.date_range[1].format("YYYY-MM-DD HH:mm:ss"),location:e.location,participants:e.participants||[],status:"planned"};t?await j.put(`/api/meetings/${t.id}`,n):await j.post("/api/meetings",n),r.resetFields(),null===a||void 0===a||a()}catch(n){console.error("Error saving meeting:",n),s.Ay.error("Toplant\u0131 kaydedilirken bir hata olu\u015ftu")}finally{h(!1)}},children:[(0,g.jsx)(o.A.Item,{name:"title",label:"Toplant\u0131 Ba\u015fl\u0131\u011f\u0131",rules:[{required:!0,message:"L\xfctfen toplant\u0131 ba\u015fl\u0131\u011f\u0131 girin"}],children:(0,g.jsx)(l.A,{prefix:(0,g.jsx)(u.A,{}),placeholder:"Toplant\u0131 ba\u015fl\u0131\u011f\u0131..."})}),(0,g.jsx)(o.A.Item,{name:"meeting_type",label:"Toplant\u0131 T\xfcr\xfc",rules:[{required:!0,message:"L\xfctfen toplant\u0131 t\xfcr\xfc se\xe7in"}],children:(0,g.jsxs)(i.A,{placeholder:"Toplant\u0131 t\xfcr\xfc se\xe7in",children:[(0,g.jsx)(y,{value:"regular",children:"Rutin Toplant\u0131"}),(0,g.jsx)(y,{value:"emergency",children:"Acil Toplant\u0131"}),(0,g.jsx)(y,{value:"board",children:"Y\xf6netim Toplant\u0131s\u0131"}),(0,g.jsx)(y,{value:"other",children:"Di\u011fer"})]})}),(0,g.jsx)(o.A.Item,{name:"date_range",label:"Tarih ve Saat",rules:[{required:!0,message:"L\xfctfen tarih ve saat se\xe7in"}],children:(0,g.jsx)(x,{showTime:!0,format:"YYYY-MM-DD HH:mm",style:{width:"100%"}})}),(0,g.jsx)(o.A.Item,{name:"location",label:"Konum",children:(0,g.jsx)(l.A,{placeholder:"Toplant\u0131 yeri veya online ba\u011flant\u0131..."})}),(0,g.jsx)(o.A.Item,{name:"participants",label:"Kat\u0131l\u0131mc\u0131lar",children:(0,g.jsx)(i.A,{mode:"multiple",placeholder:"Kat\u0131l\u0131mc\u0131lar\u0131 se\xe7in",style:{width:"100%"},children:v.map((e=>(0,g.jsx)(y,{value:e.id,children:`${e.first_name} ${e.last_name}`},e.id)))})}),(0,g.jsx)(o.A.Item,{name:"description",label:"A\xe7\u0131klama",children:(0,g.jsx)(A,{rows:4,placeholder:"Toplant\u0131 hakk\u0131nda a\xe7\u0131klama..."})}),(0,g.jsx)(o.A.Item,{children:(0,g.jsxs)(c.A,{children:[(0,g.jsx)(d.Ay,{type:"primary",htmlType:"submit",loading:m,children:t?"G\xfcncelle":"Olu\u015ftur"}),(0,g.jsx)(d.Ay,{onClick:()=>r.resetFields(),children:"Temizle"})]})})]})}},8114:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(8168),r=a(9950);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};var i=a(5085),o=function(e,t){return r.createElement(i.A,(0,n.A)({},e,{ref:t,icon:l}))};const s=r.forwardRef(o)},9251:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(8168),r=a(9950);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};var i=a(5085),o=function(e,t){return r.createElement(i.A,(0,n.A)({},e,{ref:t,icon:l}))};const s=r.forwardRef(o)},974:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(8168),r=a(9950);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"};var i=a(5085),o=function(e,t){return r.createElement(i.A,(0,n.A)({},e,{ref:t,icon:l}))};const s=r.forwardRef(o)},1988:(e,t,a)=>{a.d(t,{A:()=>n});const n=a(5352).A},7094:(e,t,a)=>{a.d(t,{A:()=>n});const n=a(8786).A}}]);